import{s as k,r as c,m as se,f as ue,g as re,c as z,a as x,b as t,l as v,v as j,h as l,i,j as de,u as a,F as A,d as G,k as f,x as g,y as H,E as ce,n as b,e as r}from"./index-B_mAkUH5.js";function pe(d){return k({url:"/system/notice",method:"get",params:d})}function me(d){return k({url:"/system/notice/"+d,method:"get"})}function fe(d){return k({url:"/system/notice",method:"post",data:d})}function ve(d){return k({url:"/system/notice",method:"put",data:d})}function ge(d){return k({url:"/system/notice/"+d,method:"delete"})}const _e={class:"app-container"},ye={class:"bcbox"},be={class:"bcbox"},Te={class:"bcbox"},we={class:"dialog-footer"},Ve={__name:"index",setup(d){const E=c([]),_=c(!1),C=c(!0),N=c(!0),S=c([]),R=c(!0),q=c(!0),U=c(0),P=c(""),D=c(se.noticeTypeList),J=ue({form:{},queryParams:{pageNum:1,pageSize:10,noticeTitle:void 0,createBy:void 0,status:void 0},rules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"change"}]}}),{queryParams:u,form:s,rules:O}=re(J);function y(){C.value=!0,pe(u.value).then(n=>{E.value=n.data,U.value=n.total,C.value=!1})}function W(){_.value=!1,B()}function B(){s.value={noticeId:void 0,noticeTitle:void 0,noticeType:void 0,noticeContent:void 0,status:"0"}}function I(){u.value.pageNum=1,y()}function X(){I()}function Y(n){S.value=n.map(e=>e.noticeId),R.value=n.length!=1,q.value=!n.length}function Z(){B(),_.value=!0,P.value="添加公告"}function L(n){B();const e=n.noticeId||S.value;me(e).then(p=>{s.value=p.data,_.value=!0,P.value="修改公告"})}const ee=async()=>{try{if(s.value.noticeId){const n=await ve(s.value);n.code==200?(b.success(n.message),_.value=!1,y()):b.error(n.message)}else{const n=await fe(s.value);n.code==200?(b.success(n.message),_.value=!1,y()):b.error(n.message)}}catch{b.error("操作失败")}},F=async n=>{const e=n.noticeId||S.value;ce.confirm('是否确认删除公告编号为"'+e+'"的数据项？',"系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{ge(e).then(p=>{p.code==200?(b.success(p.message),y()):b.error(p.message)})}).catch(()=>{})};return y(),(n,e)=>{const p=i("el-input"),T=i("el-form-item"),Q=i("el-option"),K=i("el-select"),m=i("el-button"),M=i("el-form"),w=i("el-col"),te=i("RightToolbar"),$=i("el-row"),h=i("el-table-column"),le=i("el-table"),oe=i("Pagination"),ne=i("el-dialog"),V=H("hasPermi"),ae=H("loading");return r(),z("div",_e,[x("div",ye,[v(t(M,{model:a(u),ref:"queryRef",inline:!0},{default:l(()=>[t(T,{label:"公告标题",prop:"noticeTitle"},{default:l(()=>[t(p,{modelValue:a(u).noticeTitle,"onUpdate:modelValue":e[0]||(e[0]=o=>a(u).noticeTitle=o),placeholder:"请输入公告标题",clearable:"",style:{width:"200px"},onKeyup:de(I,["enter"])},null,8,["modelValue"])]),_:1}),t(T,{label:"类型",prop:"noticeType"},{default:l(()=>[t(K,{modelValue:a(u).noticeType,"onUpdate:modelValue":e[1]||(e[1]=o=>a(u).noticeType=o),placeholder:"公告类型",clearable:"",style:{width:"200px"}},{default:l(()=>[(r(!0),z(A,null,G(D.value,o=>(r(),g(Q,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(T,null,{default:l(()=>[t(m,{type:"primary",icon:"Search",onClick:I},{default:l(()=>e[9]||(e[9]=[f("搜索")])),_:1}),t(m,{icon:"Refresh",onClick:X},{default:l(()=>e[10]||(e[10]=[f("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[j,N.value]])]),x("div",be,[t($,{gutter:10,class:"mb8"},{default:l(()=>[t(w,{span:1.5},{default:l(()=>[v((r(),g(m,{type:"primary",plain:"",icon:"Plus",onClick:Z},{default:l(()=>e[11]||(e[11]=[f("新增")])),_:1})),[[V,["system:notice:add"]]])]),_:1}),t(w,{span:1.5},{default:l(()=>[v((r(),g(m,{type:"success",plain:"",icon:"Edit",disabled:R.value,onClick:L},{default:l(()=>e[12]||(e[12]=[f("修改")])),_:1},8,["disabled"])),[[V,["system:notice:edit"]]])]),_:1}),t(w,{span:1.5},{default:l(()=>[v((r(),g(m,{type:"danger",plain:"",icon:"Delete",disabled:q.value,onClick:F},{default:l(()=>e[13]||(e[13]=[f("删除")])),_:1},8,["disabled"])),[[V,["system:notice:remove"]]])]),_:1}),t(te,{showSearch:N.value,"onUpdate:showSearch":e[2]||(e[2]=o=>N.value=o),onQueryTable:y},null,8,["showSearch"])]),_:1})]),x("div",Te,[v((r(),g(le,{stripe:"",border:!1,data:E.value,onSelectionChange:Y},{default:l(()=>[t(h,{type:"selection",width:"55",align:"center"}),t(h,{label:"序号",align:"center",prop:"noticeId",width:"100"}),t(h,{label:"公告标题",align:"center",prop:"noticeTitle","show-overflow-tooltip":!0}),t(h,{label:"创建时间",align:"center",prop:"createTime",width:"220"}),t(h,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(o=>[v((r(),g(m,{link:"",type:"primary",icon:"Edit",onClick:ie=>L(o.row)},{default:l(()=>e[14]||(e[14]=[f("修改")])),_:2},1032,["onClick"])),[[V,["system:notice:edit"]]]),v((r(),g(m,{link:"",type:"primary",icon:"Delete",onClick:ie=>F(o.row)},{default:l(()=>e[15]||(e[15]=[f("删除")])),_:2},1032,["onClick"])),[[V,["system:notice:remove"]]])]),_:1})]),_:1},8,["data"])),[[ae,C.value]]),v(t(oe,{total:U.value,"current-page":a(u).pageNum,"onUpdate:currentPage":e[3]||(e[3]=o=>a(u).pageNum=o),"page-size":a(u).pageSize,"onUpdate:pageSize":e[4]||(e[4]=o=>a(u).pageSize=o),onPagination:y},null,8,["total","current-page","page-size"]),[[j,U.value>0]])]),t(ne,{title:P.value,modelValue:_.value,"onUpdate:modelValue":e[8]||(e[8]=o=>_.value=o),width:"780px","append-to-body":""},{footer:l(()=>[x("div",we,[t(m,{type:"primary",onClick:ee},{default:l(()=>e[16]||(e[16]=[f("确 定")])),_:1}),t(m,{onClick:W},{default:l(()=>e[17]||(e[17]=[f("取 消")])),_:1})])]),default:l(()=>[t(M,{ref:"noticeRef",model:a(s),rules:a(O),"label-width":"80px"},{default:l(()=>[t($,null,{default:l(()=>[t(w,{span:24},{default:l(()=>[t(T,{label:"公告标题",prop:"noticeTitle"},{default:l(()=>[t(p,{modelValue:a(s).noticeTitle,"onUpdate:modelValue":e[5]||(e[5]=o=>a(s).noticeTitle=o),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1})]),_:1}),t(w,{span:24},{default:l(()=>[t(T,{label:"公告类型",prop:"noticeType"},{default:l(()=>[t(K,{modelValue:a(s).noticeType,"onUpdate:modelValue":e[6]||(e[6]=o=>a(s).noticeType=o),placeholder:"请选择"},{default:l(()=>[(r(!0),z(A,null,G(D.value,o=>(r(),g(Q,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(w,{span:24},{default:l(()=>[t(T,{label:"内容"},{default:l(()=>[t(p,{type:"textarea",modelValue:a(s).noticeContent,"onUpdate:modelValue":e[7]||(e[7]=o=>a(s).noticeContent=o),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}};export{Ve as default};
