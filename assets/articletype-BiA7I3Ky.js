import{z as le,r as i,f as te,g as ae,c as oe,a as V,b as l,l as c,v as C,h as a,i as u,j as ne,u as n,k as g,x as k,y as N,n as y,A as de,e as _}from"./index-B_mAkUH5.js";import{g as ie}from"./dictType-DtMYnulG.js";import{g as se,d as ue,u as re,a as ce,l as pe}from"./dictData-CefU4asS.js";const me={class:"page-articletype"},fe={class:"bcbox"},ge={class:"bcbox"},ve={class:"bcbox"},be={class:"dialog-footer"},ke={__name:"articletype",setup(ye){const{proxy:T}=le(),U=i([]),p=i(!1),w=i(!0),q=i(!0),D=i([]),R=i(!0),B=i(!0),x=i(0),h=i(""),$=i("nexus_articletype");i([]),de(),i([{value:"default",label:"默认"},{value:"primary",label:"主要"},{value:"success",label:"成功"},{value:"info",label:"信息"},{value:"warning",label:"警告"},{value:"danger",label:"危险"}]);const E=te({form:{},queryParams:{pageNum:1,pageSize:10,dictType:void 0,dictLabel:void 0,status:void 0},rules:{dictLabel:[{required:!0,message:"数据标签不能为空",trigger:"blur"}],dictValue:[{required:!0,message:"数据键值不能为空",trigger:"blur"}],dictSort:[{required:!0,message:"数据顺序不能为空",trigger:"blur"}]}}),{queryParams:s,form:d,rules:A}=ae(E);function I(t){ie(t).then(e=>{s.value.dictType=e.data.dictType,$.value=e.data.dictType,v()})}function v(){w.value=!0,pe(s.value).then(t=>{U.value=t.data,x.value=t.total,w.value=!1})}function K(){p.value=!1,L()}function L(){d.value={dictCode:void 0,dictLabel:void 0,dictValue:void 0,cssClass:void 0,listClass:"default",dictSort:0,status:"0",remark:void 0}}function P(){s.value.pageNum=1,v()}function Q(){}function j(){L(),p.value=!0,h.value="添加",d.value.dictType=s.value.dictType}function F(t){D.value=t.map(e=>e.dictCode),R.value=t.length!=1,B.value=!t.length}function M(t){L();const e=t.dictCode||D.value;se(e).then(r=>{d.value=r.data,p.value=!0,h.value="修改"})}const G=async()=>{try{if(d.value.dictCode!=null){const t=await re(d.value);t.code==200?(y.success(t.message),p.value=!1,v()):y.error(t.message)}else{const t=await ce(d.value);t.code==200?(y.success(t.message),p.value=!1,v()):y.error(t.message)}}catch{y.error("操作失败")}};function H(t){const e=t.dictCode||D.value;T.$modal.confirm('是否确认删除字典编码为"'+e+'"的数据项？').then(function(){return ue(e)}).then(()=>{v(),T.$modal.msgSuccess("删除成功")}).catch(()=>{})}return I(102),(t,e)=>{const r=u("el-input"),m=u("el-form-item"),f=u("el-button"),z=u("el-form"),J=u("el-col"),O=u("el-row"),b=u("el-table-column"),W=u("el-table"),X=u("Pagination"),Y=u("el-dialog"),S=N("hasPermi"),Z=N("loading");return _(),oe("div",me,[V("div",fe,[c(l(z,{model:n(s),ref:"queryRef",inline:!0},{default:a(()=>[l(m,{label:"分类",prop:"dictLabel"},{default:a(()=>[l(r,{modelValue:n(s).dictLabel,"onUpdate:modelValue":e[0]||(e[0]=o=>n(s).dictLabel=o),placeholder:"请输入",clearable:"",style:{width:"200px"},onKeyup:ne(P,["enter"])},null,8,["modelValue"])]),_:1}),l(m,null,{default:a(()=>[l(f,{type:"primary",icon:"Search",onClick:P},{default:a(()=>e[9]||(e[9]=[g("搜索")])),_:1}),l(f,{icon:"Refresh",onClick:Q},{default:a(()=>e[10]||(e[10]=[g("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[C,q.value]])]),V("div",ge,[l(O,{gutter:10,class:"mb8"},{default:a(()=>[l(J,{span:1.5},{default:a(()=>[c((_(),k(f,{type:"primary",plain:"",icon:"Plus",onClick:j},{default:a(()=>e[11]||(e[11]=[g("新增")])),_:1})),[[S,["system:dict:add"]]])]),_:1})]),_:1})]),V("div",ve,[c((_(),k(W,{data:U.value,onSelectionChange:F},{default:a(()=>[l(b,{type:"selection",width:"55",align:"center"}),l(b,{label:"ID",align:"center",prop:"dictCode"}),l(b,{label:"数据值",align:"center",prop:"dictValue"}),l(b,{label:"分类",align:"center",prop:"dictLabel"}),l(b,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),l(b,{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},{default:a(o=>[c((_(),k(f,{link:"",type:"primary",icon:"Edit",onClick:ee=>M(o.row)},{default:a(()=>e[12]||(e[12]=[g("修改")])),_:2},1032,["onClick"])),[[S,["system:dict:edit"]]]),c((_(),k(f,{link:"",type:"primary",icon:"Delete",onClick:ee=>H(o.row)},{default:a(()=>e[13]||(e[13]=[g("删除")])),_:2},1032,["onClick"])),[[S,["system:dict:remove"]]])]),_:1})]),_:1},8,["data"])),[[Z,w.value]]),c(l(X,{total:x.value,"current-page":n(s).pageNum,"onUpdate:currentPage":e[1]||(e[1]=o=>n(s).pageNum=o),"page-size":n(s).pageSize,"onUpdate:pageSize":e[2]||(e[2]=o=>n(s).pageSize=o),onPagination:v},null,8,["total","current-page","page-size"]),[[C,x.value>0]])]),l(Y,{title:h.value,modelValue:p.value,"onUpdate:modelValue":e[8]||(e[8]=o=>p.value=o),width:"500px","append-to-body":""},{footer:a(()=>[V("div",be,[l(f,{type:"primary",onClick:G},{default:a(()=>e[14]||(e[14]=[g("确 定")])),_:1}),l(f,{onClick:K},{default:a(()=>e[15]||(e[15]=[g("取 消")])),_:1})])]),default:a(()=>[l(z,{ref:"dataRef",model:n(d),rules:n(A),"label-width":"80px"},{default:a(()=>[c(l(m,{label:"字典类型"},{default:a(()=>[l(r,{modelValue:n(d).dictType,"onUpdate:modelValue":e[3]||(e[3]=o=>n(d).dictType=o),disabled:!0},null,8,["modelValue"])]),_:1},512),[[C,!1]]),l(m,{label:"分类",prop:"dictLabel"},{default:a(()=>[l(r,{modelValue:n(d).dictLabel,"onUpdate:modelValue":e[4]||(e[4]=o=>n(d).dictLabel=o),placeholder:"请输入数据标签"},null,8,["modelValue"])]),_:1}),l(m,{label:"数据值",prop:"dictValue"},{default:a(()=>[l(r,{modelValue:n(d).dictValue,"onUpdate:modelValue":e[5]||(e[5]=o=>n(d).dictValue=o),placeholder:"请输入数据键值"},null,8,["modelValue"])]),_:1}),c(l(m,{label:"样式属性",prop:"cssClass"},{default:a(()=>[l(r,{modelValue:n(d).cssClass,"onUpdate:modelValue":e[6]||(e[6]=o=>n(d).cssClass=o),placeholder:"请输入样式属性"},null,8,["modelValue"])]),_:1},512),[[C,!1]]),l(m,{label:"备注",prop:"remark"},{default:a(()=>[l(r,{modelValue:n(d).remark,"onUpdate:modelValue":e[7]||(e[7]=o=>n(d).remark=o),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}};export{ke as default};
