import{s as v,_ as J,r,f as X,w as Y,g as Z,o as ee,c as te,a as h,b as t,h as a,i as d,j as ae,u as n,k as p,l as $,x as w,C as V,v as le,E as D,n as g,q as oe,y as ne,e as _}from"./index-B_mAkUH5.js";function re(s){return v({url:"/products",method:"get",params:s})}function se(s){return v({url:"/products",method:"post",data:s})}function ue(s){return v({url:`/products/${s}`,method:"delete"})}function ie(s){return v({url:"/products",method:"put",data:s})}function de(s){return v({url:`/products/${s}`,method:"get"})}function pe(s,C){return v({url:"/products/status/"+s,method:"put",data:C})}const me={class:"pagebox pageuser"},ce={class:"bcbox"},fe={class:"bcbox"},ge={class:"mgbt20"},_e={class:"dialog-footer"},ve="80px",be={__name:"index",setup(s){const C=r();oe(),r(null);const R=X({form:{},queryParams:{pageNum:1,pageSize:10,name:""},rules:{phone:[{required:!0,message:"手机号不能为空",trigger:"blur"}],address:[{required:!1,message:"地址不能为空",trigger:"change"}],name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],password:[{required:!0,message:"登录密码不能为空",trigger:"blur"}],age:[{required:!1,message:"性别不能为空",trigger:"change"}],avatar:[{required:!1,message:"头像不能为空",trigger:"change"}]}}),S=r("");Y(S,o=>{console.log("图片 URL 已更新:",o)});const{queryParams:m,form:i,rules:E}=Z(R);r(null);const N=r([]),f=r(!1),P=r("");r(2),r(10),r(!1),r(!1),r(!1);const q=r(0);ee(()=>{console.log("挂载"),k()});function k(){m.value.pageNum=1,b()}function b(){re(m.value).then(o=>{o.code==200&&(N.value=o.data),q.value=o.total})}function I(o){de(o.productId).then(e=>{e.code==200&&(i.value=e.data,f.value=!0,S.value=e.data.avatar)})}function j(o){K(),f.value=!0,P.value="添加"}async function M(){let o={name:"智能手机",description:"最新款智能手机，支持5G网络。",category_id:1,price:3999.99,stock:50,sku:"SM-123456",brand:"品牌A",weight:.45,dimensions:"15.5x7.5x0.8 cm",color:"黑色",size:"标准",status:"available",is_active:!0,is_featured:!1,is_on_sale:!0,image_url:"https://example.com/product_image.jpg",additional_images:"https://example.com/product_image1.jpg,https://example.com/product_image2.jpg",video_url:"https://example.com/product_video.mp4",created_at:"2025-04-08T10:00:00",updated_at:"2025-04-08T10:00:00",deleted_at:null,tags:"新品,限时折扣",promotion_price:2999.99,rating:4.5,review_count:120,shipping_fee:30,supplier_id:10},e;i.value.productId?(console.log("修改"),e=await ie(i.value)):(console.log("增加"),e=await se(o)),e.code===200?(g.success(e.message),f.value=!1,k()):g.error(e.message)}function F(o){P.value="修改",I(o)}const L=async o=>{const e=o.productId||e.value;D.confirm("是否确认删除选中的数据项？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{ue(e).then(u=>{u.code==200?(g.success(u.message),b()):g.error(u.message)})}).catch(()=>{})};function T(o,e){D.confirm("确认要更改状态吗?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{pe(o.productId,{isActive:e}).then(function(u){u.code==200?(g.success(u.message),b()):(g.error(u.message),b())})}).catch(()=>{})}function K(){i.value={name:"",age:"",sex:1,imageUrl:""}}return(o,e)=>{const u=d("el-input"),y=d("el-form-item"),c=d("el-button"),z=d("el-form"),x=d("el-table-column"),A=d("el-tag"),G=d("el-table"),O=d("Pagination"),U=d("el-col"),Q=d("el-row"),W=d("el-dialog"),H=ne("hasPermi");return _(),te("div",me,[h("div",ce,[t(z,{model:n(m),ref:"queryRef",inline:!0},{default:a(()=>[t(y,{label:"商品名称",prop:"name"},{default:a(()=>[t(u,{modelValue:n(m).name,"onUpdate:modelValue":e[0]||(e[0]=l=>n(m).name=l),placeholder:"请输入",clearable:"",style:{width:"120px"},onKeyup:ae(k,["enter"])},null,8,["modelValue"])]),_:1}),t(y,null,{default:a(()=>[t(c,{type:"primary",onClick:k},{default:a(()=>e[8]||(e[8]=[p("查询")])),_:1})]),_:1})]),_:1},8,["model"])]),h("div",fe,[h("div",ge,[$((_(),w(c,{onClick:j,type:"primary"},{default:a(()=>e[9]||(e[9]=[p("增加")])),_:1})),[[H,["system:product:add"]]])]),t(G,{class:"nexustable",border:"",data:N.value,style:{width:"100%"},"max-height":"540"},{default:a(()=>[t(x,{fixed:"",prop:"name",label:"商品名称"}),t(x,{fixed:"",prop:"price",label:"价格"}),t(x,{prop:"createTime",label:"创建时间",width:"200"}),t(x,{label:"状态",align:"center",key:"status"},{default:a(l=>[l.row.isActive==0?(_(),w(A,{key:0,style:{cursor:"pointer"},type:"success"},{default:a(()=>e[10]||(e[10]=[p("展示")])),_:1})):V("",!0),l.row.isActive==1?(_(),w(A,{key:1,style:{cursor:"pointer"},type:"primary"},{default:a(()=>e[11]||(e[11]=[p("撤销")])),_:1})):V("",!0)]),_:1}),t(x,{fixed:"right",label:"Operations"},{default:a(l=>[t(c,{type:"success",plain:"",onClick:B=>F(l.row)},{default:a(()=>e[12]||(e[12]=[p("修改")])),_:2},1032,["onClick"]),t(c,{type:"danger",plain:"",onClick:B=>L(l.row)},{default:a(()=>e[13]||(e[13]=[p("删除")])),_:2},1032,["onClick"]),l.row.isActive==1?(_(),w(c,{key:0,type:"info",plain:"",onClick:B=>T(l.row,0)},{default:a(()=>e[14]||(e[14]=[p("去展示")])),_:2},1032,["onClick"])):V("",!0),l.row.isActive==0?(_(),w(c,{key:1,type:"warning",plain:"",onClick:B=>T(l.row,1)},{default:a(()=>e[15]||(e[15]=[p("去撤销")])),_:2},1032,["onClick"])):V("",!0)]),_:1})]),_:1},8,["data"]),$(t(O,{total:q.value,"current-page":n(m).pageNum,"onUpdate:currentPage":e[1]||(e[1]=l=>n(m).pageNum=l),"page-size":n(m).pageSize,"onUpdate:pageSize":e[2]||(e[2]=l=>n(m).pageSize=l),onPagination:b},null,8,["total","current-page","page-size"]),[[le,q.value>0]])]),t(W,{modelValue:f.value,"onUpdate:modelValue":e[7]||(e[7]=l=>f.value=l),title:P.value,width:"660","align-center":"",draggable:"","body-class":"dialogform"},{footer:a(()=>[h("div",_e,[t(c,{onClick:e[6]||(e[6]=l=>f.value=!1)},{default:a(()=>e[16]||(e[16]=[p("Cancel")])),_:1}),t(c,{type:"primary",onClick:M},{default:a(()=>e[17]||(e[17]=[p(" 确认 ")])),_:1})])]),default:a(()=>[t(z,{ref_key:"ruleFormRef",ref:C,model:n(i),"label-width":ve,rules:n(E)},{default:a(()=>[t(Q,null,{default:a(()=>[t(U,{span:24},{default:a(()=>[t(y,{label:"商品名称",prop:"name"},{default:a(()=>[t(u,{modelValue:n(i).name,"onUpdate:modelValue":e[3]||(e[3]=l=>n(i).name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),t(U,{span:24},{default:a(()=>[t(y,{label:"商品描述",prop:"description"},{default:a(()=>[t(u,{modelValue:n(i).description,"onUpdate:modelValue":e[4]||(e[4]=l=>n(i).description=l),type:"textarea",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),t(U,{span:24},{default:a(()=>[t(y,{label:"商品价格",prop:"price"},{default:a(()=>[t(u,{modelValue:n(i).price,"onUpdate:modelValue":e[5]||(e[5]=l=>n(i).price=l),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},xe=J(be,[["__scopeId","data-v-45b4047b"]]);export{xe as default};
