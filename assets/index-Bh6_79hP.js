import{s as z,B as O,f as Q,r as n,g as A,o as W,n as p,c as k,a as _,b as t,h as a,u as r,i,j as U,k as g,t as G,q as H,e as x}from"./index-B_mAkUH5.js";function X(m){return z({url:"/help",method:"get",params:m})}function Y(m){return z({url:"/help",method:"post",data:m})}function Z(m){return z({url:"/help",method:"put",data:m})}const ee={class:"pagebox pageuser"},le={class:"bcbox"},te={class:"bcbox"},oe={class:"mgbt20"},ae={key:0},ne={key:1},se={class:"page-pagination"},re={class:"dialog-footer"},ue="100px",me=O({__name:"index",setup(m){H();const R=Q({form:{},queryParams:{pageNum:1,pageSize:10,name:"",age:"",sex:1,userId:""},rules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"change"}]}});n("");const{queryParams:u,form:s,rules:ie}=A(R);n(null);const N=n([]),d=n(!1),w=n(""),V=n(1),C=n(10),B=n(!1),T=n(!1),$=n(!1),S=n(!1);W(()=>{console.log("挂载"),y()});function y(){u.value.pageNum=1,f()}const f=async()=>{try{const l=await X(u.value);console.log(l,"res"),l.code==200?(N.value=l.data,S.value=l.total):p.error(l.message)}catch{p.error("加载反馈数据失败")}};function D(l){F(),d.value=!0,w.value="反馈信息添加"}const E=async()=>{try{if(s.value.id){const l=await Z(s.value);console.log(l,"res"),l.code==200?(p.success(l.message),d.value=!1,f()):p.error(l.message)}else{const l=await Y(s.value);console.log(l,"res"),l.code==200?(p.success(l.message),d.value=!1,f()):p.error(l.message)}}catch{p.error("操作失败")}};function K(l){console.log(l,"修改"),w.value="反馈信息";let e=JSON.parse(JSON.stringify(l));s.value=e,d.value=!0}const L=n(),P=l=>{console.log(`${l} items per page`),u.value.pageSize=C.value,f()},j=l=>{console.log(`current page: ${l}`),u.value.pageNum=V.value,f()};function F(){s.value={id:null,name:"",phone:"",describe:"",feedinformation:""}}return(l,e)=>{const h=i("el-input"),v=i("el-form-item"),c=i("el-button"),q=i("el-form"),b=i("el-table-column"),I=i("el-table"),J=i("el-pagination"),M=i("el-dialog");return x(),k("div",ee,[_("div",le,[t(q,{model:r(u),ref:"queryRef",inline:!0},{default:a(()=>[t(v,{label:"标题",prop:"title"},{default:a(()=>[t(h,{modelValue:r(u).name,"onUpdate:modelValue":e[0]||(e[0]=o=>r(u).name=o),placeholder:"请输入",clearable:"",style:{width:"120px"},onKeyup:U(y,["enter"])},null,8,["modelValue"])]),_:1}),t(v,{label:"内容",prop:"content"},{default:a(()=>[t(h,{modelValue:r(u).content,"onUpdate:modelValue":e[1]||(e[1]=o=>r(u).content=o),placeholder:"请输入",clearable:"",style:{width:"120px"},onKeyup:U(y,["enter"])},null,8,["modelValue"])]),_:1}),t(v,null,{default:a(()=>[t(c,{type:"primary",onClick:y},{default:a(()=>e[8]||(e[8]=[g("查询")])),_:1}),t(c,{type:"success",onClick:l.resetQuery},{default:a(()=>e[9]||(e[9]=[g("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_("div",te,[_("div",oe,[t(c,{onClick:D,type:"primary"},{default:a(()=>e[10]||(e[10]=[g("增加")])),_:1})]),t(I,{border:"",data:N.value,stripe:"",style:{width:"100%"}},{default:a(()=>[t(b,{prop:"id",label:"记录ID",width:"80"}),t(b,{prop:"title",label:"标题",width:"150"}),t(b,{prop:"createTime",label:"创建时间"}),t(b,{prop:"content",label:"内容","show-overflow-tooltip":!0},{default:a(o=>[o.row.content==""?(x(),k("span",ae,"----")):(x(),k("span",ne,G(o.row.content),1))]),_:1}),t(b,{fixed:"right",label:"操作",width:"200"},{default:a(o=>[t(c,{size:"small",onClick:de=>K(o.row)},{default:a(()=>e[11]||(e[11]=[g("编辑")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),_("div",se,[t(J,{"current-page":V.value,"onUpdate:currentPage":e[2]||(e[2]=o=>V.value=o),"page-size":C.value,"onUpdate:pageSize":e[3]||(e[3]=o=>C.value=o),"page-sizes":[10,20,50],small:B.value,disabled:$.value,background:T.value,layout:"->, total, sizes, prev, pager, next, jumper",total:S.value,onSizeChange:P,onCurrentChange:j},null,8,["current-page","page-size","small","disabled","background","total"])])]),t(M,{modelValue:d.value,"onUpdate:modelValue":e[7]||(e[7]=o=>d.value=o),title:w.value,width:"660","align-center":"",draggable:""},{footer:a(()=>[_("div",re,[t(c,{onClick:e[6]||(e[6]=o=>d.value=!1)},{default:a(()=>e[12]||(e[12]=[g("Cancel")])),_:1}),t(c,{type:"primary",onClick:E},{default:a(()=>e[13]||(e[13]=[g(" 确认 ")])),_:1})])]),default:a(()=>[t(q,{ref_key:"formRef",ref:L,model:r(s),"label-width":ue},{default:a(()=>[t(v,{label:"标题",prop:"title",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{default:a(()=>[t(h,{modelValue:r(s).title,"onUpdate:modelValue":e[4]||(e[4]=o=>r(s).title=o),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),t(v,{label:"内容",prop:"content",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{default:a(()=>[t(h,{modelValue:r(s).content,"onUpdate:modelValue":e[5]||(e[5]=o=>r(s).content=o),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});export{me as default};
