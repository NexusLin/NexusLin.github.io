import{_ as s,n as i,q as a,t as n}from"./chunks/theme-components.DDZ15eKn.js";import"./chunks/search-index.B-gvvmFQ.js";const t=JSON.parse('{"title":"NestJS-时间处理","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"src/node/nest/NestJS-时间处理.md","filePath":"src/node/nest/NestJS-时间处理.md","lastUpdated":1748496767000}');const h=s({name:"src/node/nest/NestJS-时间处理.md"},[["render",function(s,t,h,l,e,p){return a(),i("div",null,t[0]||(t[0]=[n('<h1 id="nestjs-时间处理" tabindex="-1">NestJS-时间处理 <a class="header-anchor" href="#nestjs-时间处理" aria-label="Permalink to &quot;NestJS-时间处理&quot;">​</a></h1><p>我们查询的时候会发现，默认nestJS给我们返回的时间格式是这样子的</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-05-12T02:51:15.000Z&quot;</span></span></code></pre></div><p>这其实是UTC国际时间，加上时区就成为了我们正常的时间，认识一下我们常见的几种时间格式以及代表的含义</p><h2 id="_1、认识时间格式及含义" tabindex="-1">1、认识时间格式及含义 <a class="header-anchor" href="#_1、认识时间格式及含义" aria-label="Permalink to &quot;1、认识时间格式及含义&quot;">​</a></h2><h3 id="_1-iso-8601-格式" tabindex="-1">1. <strong>ISO 8601 格式</strong> <a class="header-anchor" href="#_1-iso-8601-格式" aria-label="Permalink to &quot;1. **ISO 8601 格式**&quot;">​</a></h3><blockquote><ul><li><strong>ISO 8601</strong> 格式是全球通用的标准，通常用于数据交换和存储。</li></ul></blockquote><ul><li><strong>格式</strong>: <code>YYYY-MM-DDTHH:mm:ss.sssZ</code></li><li><strong>示例</strong>: <code>2025-05-12T02:51:15.000Z</code></li><li><strong>含义</strong>: ISO 8601 是国际标准时间格式，常用于表示日期和时间。<code>T</code> 分隔日期和时间部分，<code>Z</code> 表示该时间是 UTC（协调世界时）时间。这个格式适合进行国际化的时间存储和传输。</li></ul><h3 id="_2-unix-时间戳-epoch-时间" tabindex="-1">2. <strong>Unix 时间戳（Epoch 时间）</strong> <a class="header-anchor" href="#_2-unix-时间戳-epoch-时间" aria-label="Permalink to &quot;2. **Unix 时间戳（Epoch 时间）**&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">以秒数或毫秒数表示时间，常用于编程和计算机系统</span></span></code></pre></div><ul><li><strong>格式</strong>: 秒数表示的时间戳，如 <code>1596740500</code> 或毫秒时间戳 <code>1596740500000</code></li><li><strong>示例</strong>: <code>1596740500</code> 或 <code>1596740500000</code></li><li><strong>含义</strong>: Unix 时间戳表示自1970年1月1日00:00:00 UTC以来的秒数（或毫秒数）。这种格式通常用于编程中处理时间，因为它是一个数字，便于存储和计算。</li></ul><h3 id="_3-rfc-2822-格式" tabindex="-1">3. <strong>RFC 2822 格式</strong> <a class="header-anchor" href="#_3-rfc-2822-格式" aria-label="Permalink to &quot;3. **RFC 2822 格式**&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">主要用于电子邮件</span></span></code></pre></div><ul><li><strong>格式</strong>: <code>Day, DD Month YYYY HH:mm:ss +0000</code></li><li><strong>示例</strong>: <code>Mon, 12 May 2025 02:51:15 +0000</code></li><li><strong>含义</strong>: RFC 2822 格式常用于电子邮件的头部信息。它包含了星期几、日期、月份、年份、时间（24小时制）以及时区偏移量。</li></ul><h3 id="_4-自定义格式-常见于日志或用户界面" tabindex="-1">4. <strong>自定义格式（常见于日志或用户界面）</strong> <a class="header-anchor" href="#_4-自定义格式-常见于日志或用户界面" aria-label="Permalink to &quot;4. **自定义格式（常见于日志或用户界面）**&quot;">​</a></h3><ul><li><strong>格式</strong>: <code>MM/DD/YYYY HH:mm:ss</code> 或 <code>DD/MM/YYYY HH:mm:ss</code></li><li><strong>示例</strong>: <code>05/12/2025 02:51:15</code> 或 <code>12/05/2025 02:51:15</code></li><li><strong>含义</strong>: 这是一种常见的日期时间格式，用户界面中经常使用。格式的差异主要体现在日期和月份的顺序，不同的地区（如美国和欧洲）可能会有所不同。</li></ul><h3 id="_5-utc-时间" tabindex="-1">5. <strong>UTC 时间</strong> <a class="header-anchor" href="#_5-utc-时间" aria-label="Permalink to &quot;5. **UTC 时间**&quot;">​</a></h3><ul><li><strong>格式</strong>: <code>YYYY-MM-DD HH:mm:ss UTC</code></li><li><strong>示例</strong>: <code>2025-05-12 02:51:15 UTC</code></li><li><strong>含义</strong>: UTC（协调世界时）是世界标准时间，常用于跨时区的系统中。UTC 时间没有时区偏移，适用于全球时间协调。</li></ul><h3 id="_6-本地时间-含时区偏移" tabindex="-1">6. <strong>本地时间（含时区偏移）</strong> <a class="header-anchor" href="#_6-本地时间-含时区偏移" aria-label="Permalink to &quot;6. **本地时间（含时区偏移）**&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">随着地区和文化不同</span></span></code></pre></div><ul><li><strong>格式</strong>: <code>YYYY-MM-DD HH:mm:ss +hh:mm</code></li><li><strong>示例</strong>: <code>2025-05-12 10:51:15 +08:00</code></li><li><strong>含义</strong>: 这种格式表示本地时间并包含时区的偏移量。例如，<code>+08:00</code> 表示该时间是 UTC 时间加上 8 小时，通常用于亚洲地区（如中国、马来西亚等）。</li></ul><h3 id="_7-12小时制" tabindex="-1">7. <strong>12小时制</strong> <a class="header-anchor" href="#_7-12小时制" aria-label="Permalink to &quot;7. **12小时制**&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">主要在英语国家使用，区分 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 和 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PM</span></span></code></pre></div><ul><li><strong>格式</strong>: <code>MM/DD/YYYY hh:mm:ss AM/PM</code></li><li><strong>示例</strong>: <code>05/12/2025 02:51:15 AM</code></li><li><strong>含义</strong>: 12小时制时间格式通常使用 <code>AM</code>（上午）和 <code>PM</code>（下午）来区分时间。常见于美国和一些英语国家。</li></ul><h3 id="_8-简化的日期格式" tabindex="-1">8. <strong>简化的日期格式</strong> <a class="header-anchor" href="#_8-简化的日期格式" aria-label="Permalink to &quot;8. **简化的日期格式**&quot;">​</a></h3><ul><li><strong>格式</strong>: <code>YYYY-MM-DD</code></li><li><strong>示例</strong>: <code>2025-05-12</code></li><li><strong>含义</strong>: 这种格式只表示日期，不包含具体的时间信息。适用于表示纯日期信息的场景。</li></ul><h3 id="_9-时间格式-不含日期" tabindex="-1">9. <strong>时间格式（不含日期）</strong> <a class="header-anchor" href="#_9-时间格式-不含日期" aria-label="Permalink to &quot;9. **时间格式（不含日期）**&quot;">​</a></h3><ul><li><strong>格式</strong>: <code>HH:mm:ss</code></li><li><strong>示例</strong>: <code>02:51:15</code></li><li><strong>含义</strong>: 仅表示时间（小时、分钟和秒），不包括日期。这种格式常用于显示当前的时间。</li></ul><hr><h2 id="_2、时间格式处理以及依赖" tabindex="-1">2、时间格式处理以及依赖 <a class="header-anchor" href="#_2、时间格式处理以及依赖" aria-label="Permalink to &quot;2、时间格式处理以及依赖&quot;">​</a></h2><h3 id="👉需求" tabindex="-1">👉需求 <a class="header-anchor" href="#👉需求" aria-label="Permalink to &quot;👉需求&quot;">​</a></h3><p>接下来我们就把我们的格式转为我们常见的格式</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">也就是这种时间格式</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-05-12T02:51:15.000Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 转化为</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2025</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">05</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">08</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">07</span></span></code></pre></div><p>先看看我们数据库实体设置</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Column</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;datetime&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, nullable: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;CURRENT_TIMESTAMP&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;创建时间&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  createTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Column</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;datetime&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;CURRENT_TIMESTAMP&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, comment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;更新时间&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  updateTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Date;</span></span></code></pre></div><p>我们的时间格式</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 数据库格式</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2025</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">05</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">07</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">35</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//查询出的时间格式</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-05-12T03:07:35.000Z&quot;</span></span></code></pre></div><h3 id="👉安装class-transformer" tabindex="-1">👉安装class-transformer <a class="header-anchor" href="#👉安装class-transformer" aria-label="Permalink to &quot;👉安装class-transformer&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm install class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">transformer</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">yarn add class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">transformer</span></span></code></pre></div><h3 id="👉安装date-fns-tz-库-可选" tabindex="-1">👉安装<code>date-fns-tz</code> 库（可选） <a class="header-anchor" href="#👉安装date-fns-tz-库-可选" aria-label="Permalink to &quot;👉安装`date-fns-tz` 库（可选）&quot;">​</a></h3><p>date-fns-tz库是我们常用与时间格式处理的库之一，js编写</p><p>接下来我们就使用 <code>date-fns-tz</code> 库来转换 UTC 时间到本地时区</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm install date</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tz</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">yarn add date</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tz</span></span></code></pre></div><h3 id="" tabindex="-1"><a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">​</a></h3><h2 id="_3、处理时间格式" tabindex="-1">3、处理时间格式 <a class="header-anchor" href="#_3、处理时间格式" aria-label="Permalink to &quot;3、处理时间格式&quot;">​</a></h2><h3 id="👉transformer实体字段格式化-使用" tabindex="-1">👉<code>transformer</code>实体字段格式化（使用） <a class="header-anchor" href="#👉transformer实体字段格式化-使用" aria-label="Permalink to &quot;👉`transformer`实体字段格式化（使用）&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { format } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;date-fns&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Column</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;CURRENT_TIMESTAMP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    transformer: {</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 写入数据库时不处理</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 读取时格式化</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  createTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: string; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 注意类型改为 string（如果直接返回字符串）</span></span></code></pre></div><p>这个时候再进行搜索，我们的时间数据已经成为了下面的格式</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-05-12 11:28:37&quot;</span></span></code></pre></div><h3 id="👉项目使用" tabindex="-1">👉项目使用 <a class="header-anchor" href="#👉项目使用" aria-label="Permalink to &quot;👉项目使用&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Column</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;CURRENT_TIMESTAMP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 数据库自动设置创建时间</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    transformer: {</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 写入数据库时保持 Date 类型</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 读取时转为字符串</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  createTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Date; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 类型保持为 Date</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Column</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;CURRENT_TIMESTAMP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 默认值</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    onUpdate: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CURRENT_TIMESTAMP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 关键配置，确保更新时间字段自动更新</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    transformer: {</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value,</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  updateTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Date; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 类型保持为 Date</span></span></code></pre></div><h3 id="👉更新接口中保证时间最新" tabindex="-1">👉更新接口中保证时间最新 <a class="header-anchor" href="#👉更新接口中保证时间最新" aria-label="Permalink to &quot;👉更新接口中保证时间最新&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//时刻保证我们更新接口数据最新</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> updatedUser</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">updateFormData ,updateTime: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()};</span></span></code></pre></div>',53)]))}]]);export{t as __pageData,h as default};
