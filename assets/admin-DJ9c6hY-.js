import{J,K as L,q as V,i as s,x as g,e as n,h as o,b as i,k as y,t as S,c as h,F as k,d as O,C as b,a as d,B as N,D as $,r as x,A as j,o as M,L as q,z as B,M as D,_ as U,m as I,N as z,G,u as C,O as A,P as K,Q as W}from"./index-B_mAkUH5.js";import{u as R}from"./user-C6RCANnn.js";import"./login-D_PYrTNz.js";const E=J("menu",{state:()=>({isCollapse:L.get("sidebarStatus")=="true"||!1}),actions:{setCollapseStatus(c){this.isCollapse=c,L.set("sidebarStatus",this.isCollapse.toString())}}}),H={__name:"SideItem",props:{sideItemdata:{type:Object,required:!0},isNest:{type:Boolean,default:!1},basePath:{type:String,default:""}},setup(c){const m=V(),a=r=>{m.push(r)};return(r,f)=>{const u=s("Menu"),e=s("el-icon"),_=s("el-menu-item"),t=s("Operation"),l=s("el-sub-menu");return!c.sideItemdata.children||c.sideItemdata.children.length===0?(n(),g(_,{key:0,index:c.sideItemdata.path,onClick:f[0]||(f[0]=p=>a(c.sideItemdata))},{title:o(()=>[y(S(c.sideItemdata.meta.title?c.sideItemdata.meta.title:"--"),1)]),default:o(()=>[i(e,null,{default:o(()=>[i(u)]),_:1})]),_:1},8,["index"])):(n(),g(l,{key:1,index:c.sideItemdata.path},{title:o(()=>[i(e,null,{default:o(()=>[i(t)]),_:1}),d("span",null,S(c.sideItemdata.meta.title?c.sideItemdata.meta.title:"--"),1)]),default:o(()=>[(n(!0),h(k,null,O(c.sideItemdata.children,(p,v)=>(n(),h(k,null,[p.hidden?b("",!0):(n(),g(H,{key:p.path+v,sideItemdata:p},null,8,["sideItemdata"]))],64))),256))]),_:1},8,["index"]))}}},Q=N({__name:"index",setup(c){const m=j(),a=E(),r=$(()=>JSON.parse(a.isCollapse)),f=(t,l)=>{},u=(t,l)=>{},e=x([]),_=$(()=>{const{meta:t,path:l}=m;return t!=null&&t.activeMenu?t.activeMenu:l});return M(()=>{q.options.routes.forEach(t=>{t.name=="/"&&(e.value=t.children.filter(l=>!l.hidden))})}),(t,l)=>{const p=s("el-menu");return n(),g(p,{class:"el-menu-vertical-demo","background-color":"#FFF","text-color":"#030303","active-text-color":"#1890FF","default-active":_.value,collapse:r.value,onOpen:f,onClose:u,"collapse-transition":!1,"unique-opened":!0},{default:o(()=>[(n(!0),h(k,null,O(e.value,(v,w)=>(n(),h(k,null,[v.hidden?b("",!0):(n(),g(H,{key:v.path+w,sideItemdata:v},null,8,["sideItemdata"]))],64))),256))]),_:1},8,["default-active","collapse"])}}}),X={class:"ExpandCollapse"},Y=N({__name:"ExpandCollapse",setup(c){const{proxy:m}=B(),a=E();m.$useRouter();const r=$(()=>JSON.parse(a.isCollapse)),f=()=>{a.setCollapseStatus(!1),console.log(a.isCollapse)},u=()=>{a.setCollapseStatus(!0),console.log(a.isCollapse)};return(e,_)=>{const t=s("Fold"),l=s("el-icon"),p=s("Expand");return n(),h("div",X,[r.value?(n(),g(l,{key:1,color:"#686868",size:"24",onClick:f},{default:o(()=>[i(p)]),_:1})):(n(),g(l,{key:0,color:"#686868",size:"24",onClick:u},{default:o(()=>[i(t)]),_:1}))])}}}),Z=["href"],ee={__name:"index",setup(c){const{proxy:m}=B(),a=m.$useRoute(),r=x([]),f=()=>{let e=a.matched.filter(t=>t.meta&&t.meta.title);const _=e[0];u(_)||(e=[{path:"/index",meta:{title:"首页"}}].concat(e)),r.value=e.filter(t=>t.meta&&t.meta.title&&t.meta.breadcrumb!==!1)},u=e=>{const _=e&&e.name;return _?_.trim()==="admin":!1};return D(()=>{a.path.startsWith("/redirect/")||f()}),f(),(e,_)=>{const t=s("el-breadcrumb-item"),l=s("el-breadcrumb");return n(),g(l,{separator:"/"},{default:o(()=>[(n(!0),h(k,null,O(r.value,(p,v)=>(n(),g(t,{key:p+""+v},{default:o(()=>{var w;return[d("a",{href:p.path},S((w=p.meta)==null?void 0:w.title),9,Z)]}),_:2},1024))),128))]),_:1})}}},te={class:"module-websocket"},ne={class:"el-dropdown-link"},oe={key:0},se={key:1},ae={key:1},le={__name:"index",setup(c){const m=x(!1),a=x([]);let r=null;M(()=>{r=new WebSocket(I.wsurl),r.onopen=()=>{console.log("WebSocket 连接已建立")},r.onmessage=u=>{const e=JSON.parse(u.data);e.type=="success"||(e.type=="info"?(console.log(e,"通知"),a.value.push(e.data),m.value=!0,z({title:"通知",dangerouslyUseHTMLString:!0,message:`<strong>${e.data}</strong>`})):e.type=="danger"?z({title:"用户求助",dangerouslyUseHTMLString:!0,message:`<strong>${e.data}</strong>`}):console.log("其他",e))},r.onclose=()=>{console.log("WebSocket 连接已关闭")},r.onerror=u=>{console.error("WebSocket 错误:",u)}}),G(()=>{r&&r.close()});const f=u=>{console.log(u)};return(u,e)=>{const _=s("Bell"),t=s("el-icon"),l=s("el-badge"),p=s("MuteNotification"),v=s("el-dropdown-item"),w=s("el-dropdown-menu"),P=s("el-dropdown");return n(),h("div",te,[i(P,{trigger:"click"},{dropdown:o(()=>[a.value.length>0?(n(),g(w,{key:0,class:"dropdowncont"},{default:o(()=>[(n(!0),h(k,null,O(a.value,(F,T)=>(n(),g(v,{class:"dropdownitem",key:T,onClick:be=>f(F)},{default:o(()=>[y(S(F),1)]),_:2},1032,["onClick"]))),128))]),_:1})):(n(),h("div",ae))]),default:o(()=>[d("span",ne,[m.value?(n(),h("div",oe,[i(l,{value:a.value.length,class:"item",offset:[10,10]},{default:o(()=>[i(t,{size:20},{default:o(()=>[i(_)]),_:1})]),_:1},8,["value"])])):(n(),h("div",se,[i(t,{size:20},{default:o(()=>[i(p)]),_:1})]))])]),_:1})])}}},ie=U(le,[["__scopeId","data-v-2dc1f087"]]),re={class:"pagetopNav"},de={style:{display:"flex","justify-content":"space-between"}},ce={style:{"margin-top":"4px"}},ue={style:{"margin-top":"10px","padding-top":"10px","padding-left":"10px"}},_e={style:{display:"flex",position:"relative","justify-content":"space-around"}},pe={class:"nexustag",style:{"line-height":"40px",margin:"10px 0px",height:"40px"}},me={class:"avatar-container"},fe={class:"avatar-wrapper"},he=["src"],ge=N({__name:"index",setup(c){const{proxy:m}=B(),a=R();m.$useRouter();const r=()=>{m.$confirm("确定注销并退出系统吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("退出登录"),a.logOut().then(()=>{location.href="/login"})}).catch(()=>{})},f=()=>{console.log("handleCommand")};return M(async()=>{R().getInfo().then(()=>{m.$notify({title:"欢迎语",dangerouslyUseHTMLString:!0,message:`<strong>尊敬的<i style="font-weight: bold;color:#8F41E9;">${a.name}</i>,欢迎你的登录</strong>`})}).catch(u=>{})}),(u,e)=>{const _=s("router-link"),t=s("el-dropdown-item"),l=s("el-dropdown-menu"),p=s("el-dropdown");return n(),h("div",re,[d("div",de,[d("div",ce,[i(Y)]),d("div",ue,[i(ee)])]),d("div",_e,[d("div",null,[i(ie)]),d("div",pe,[i(_,{to:"/profile"},{default:o(()=>[y(S("当前登录用户："+C(a).name),1)]),_:1})]),d("div",me,[i(p,{onCommand:f,class:"right-menu-item hover-effect",trigger:"click"},{dropdown:o(()=>[i(l,null,{default:o(()=>[i(_,{to:"/profile"},{default:o(()=>[i(t,null,{default:o(()=>e[0]||(e[0]=[y("个人中心")])),_:1})]),_:1}),i(t,null,{default:o(()=>[d("span",{onClick:r},"退出登录")]),_:1})]),_:1})]),default:o(()=>[d("div",fe,[d("img",{src:C(I).baseURL+C(a).avatar,class:"avatar-user"},null,8,he)])]),_:1})]),e[1]||(e[1]=d("div",null,null,-1))])])}}}),ve={key:0,class:"page-aside-left navshadow"},we={class:"page-aside-menu"},xe={class:"page-main-head bboxshadow"},ye={class:"page-main-body lboxshadow"},ke=N({__name:"admin",setup(c){const{proxy:m}=B(),a=E(),r=x(!0),f=$(()=>JSON.parse(a.isCollapse)),u=x(window.innerWidth),e=x(window.innerHeight),_=()=>{u.value=window.innerWidth,e.value=window.innerHeight};return M(()=>{window.addEventListener("resize",_)}),A(()=>{window.removeEventListener("resize",_)}),K("nexus",m.$config.version),(t,l)=>{const p=s("el-header"),v=s("router-view"),w=s("el-footer");return n(),h("div",{class:W(["pageadmin backbaige",f.value?"asidefold pageadmin backbaige":"asideexpend pageadmin backbaige"])},[r.value?(n(),h("div",ve,[l[0]||(l[0]=d("div",{class:"page-aside-logo"}," LOGO ",-1)),d("div",we,[i(Q)])])):b("",!0),d("div",{class:W(r.value?"page-aside-right asideshow":"page-aside-right asidefalse")},[d("div",xe,[i(ge)]),C(I).isShowPageHead?(n(),g(p,{key:0,style:{background:"#fff"}},{default:o(()=>l[1]||(l[1]=[y("头部")])),_:1})):b("",!0),d("div",ye,[i(v)]),C(I).isShowPageFoot?(n(),g(w,{key:1,style:{background:"#fff"}},{default:o(()=>l[2]||(l[2]=[y("底部")])),_:1})):b("",!0)],2)],2)}}}),Ie=U(ke,[["__scopeId","data-v-16f98414"]]);export{Ie as default};
