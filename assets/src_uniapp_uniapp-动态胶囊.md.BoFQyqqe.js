import{_ as i,n as t,q as a,t as s}from"./chunks/theme-components.DDZ15eKn.js";import"./chunks/search-index.B-gvvmFQ.js";const n=JSON.parse('{"title":"uniapp-胶囊动态距离","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"src/uniapp/uniapp-动态胶囊.md","filePath":"src/uniapp/uniapp-动态胶囊.md","lastUpdated":1743418529000}');const e=i({name:"src/uniapp/uniapp-动态胶囊.md"},[["render",function(i,n,e,p,l,h){return a(),t("div",null,n[0]||(n[0]=[s('<h1 id="uniapp-胶囊动态距离" tabindex="-1">uniapp-胶囊动态距离 <a class="header-anchor" href="#uniapp-胶囊动态距离" aria-label="Permalink to &quot;uniapp-胶囊动态距离&quot;">​</a></h1><h2 id="优化页面视距问题-getmenubuttonboundingclientrect" tabindex="-1">优化页面视距问题（getMenuButtonBoundingClientRect()） <a class="header-anchor" href="#优化页面视距问题-getmenubuttonboundingclientrect" aria-label="Permalink to &quot;优化页面视距问题（getMenuButtonBoundingClientRect()）&quot;">​</a></h2><h3 id="_1-优化的问题" tabindex="-1">（1）优化的问题 <a class="header-anchor" href="#_1-优化的问题" aria-label="Permalink to &quot;（1）优化的问题&quot;">​</a></h3><p>上面的截图里面有个问题，细心的应该也已经发现了，就是我们页面的视距就好像那个我的界面四个字跑到了最外层的那个上面一样，在我们有些页面之中无法及时的显示在页面可见范围的正中间，那么这种情况下我们应该如何处理呢？</p><p>思路：</p><p>接下来我们就利用 <code>menuButtonInfo</code> 中的位置信息，计算出一个动态的 <code>marginTop</code> 值，以确保视图元素（<code>&lt;view&gt;</code>）在页面中的正确位置，使得 <code>&lt;view&gt;</code> 元素的顶部边距（<code>marginTop</code>）可以动态地调整为按钮中心相对于顶部的位置。</p><p>优点：</p><p>这样的动态计算确保视图元素在页面布局中正确地对齐或排列，在需要响应式布局或相对定位时效果非常好。</p><h3 id="_2-getmenubuttonboundingclientrect-认识" tabindex="-1">（2）getMenuButtonBoundingClientRect()认识 <a class="header-anchor" href="#_2-getmenubuttonboundingclientrect-认识" aria-label="Permalink to &quot;（2）getMenuButtonBoundingClientRect()认识&quot;">​</a></h3><p>在小程序平台，如果原生导航栏被隐藏，仍然在右上角会有一个悬浮按钮，微信下也被称为胶囊按钮。本API用于获取小程序下该菜单按钮的布局位置信息，方便开发者布局顶部内容时避开该按钮。</p><p>坐标信息以屏幕左上角为原点。</p><p>这里我们看一下相关平台的支持性和参数 （也可以直接去uniapp官网进行搜索）</p><p><img src="https://cdn.nlark.com/yuque/0/2024/webp/22435914/1729580786828-d0d0eefa-f934-4ebb-a6b7-d80ff5d5528d.webp" alt="" loading="lazy"></p><p>返回的参数</p><p><img src="https://cdn.nlark.com/yuque/0/2024/webp/22435914/1729580786235-bf19bf73-5ca8-48c8-a4dd-189678987194.webp" alt="" loading="lazy"></p><p>使用起来也非常的简单</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> menuButtonInfo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMenuButtonBoundingClientRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p>接下来我们就去在我们的页面之中使用一下</p><h3 id="_3-使用" tabindex="-1">（3）使用 <a class="header-anchor" href="#_3-使用" aria-label="Permalink to &quot;（3）使用&quot;">​</a></h3><p>页面中定义</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> menuButtonInfo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">menuButtonInfo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uni.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMenuButtonBoundingClientRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>在页面之中使用，这里其实就是占据的我们一个距离顶部的距离，所以我们填写一个距离顶部的距离即可</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">view</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;"> :style=&quot;{marginTop:</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;"> menuButtonInfo.top</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;"> +</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;"> (menuButtonInfo.bottom</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;"> -</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;"> menuButtonInfo.top)/2+&#39;px&#39;}&quot;&gt;&lt;/view&gt;</span></span></code></pre></div><p>这里我们再次跑一下然后看一下我们的界面，这里我们已经可以看到我们的界面逆境可以看到布局之中我的部分已经掉落下来了。</p><p><img src="https://cdn.nlark.com/yuque/0/2024/webp/22435914/1729580786836-39f1df59-9de9-4a5b-8cfd-c549a9dd81ab.webp" alt="" loading="lazy"></p><p>接下来我们对于我的页面做一些基础的装饰，后续我们的颜色主题也确定为<code>#00979c</code> 这个颜色为主</p><p><img src="https://cdn.nlark.com/yuque/0/2024/webp/22435914/1729580786529-1caa7d78-f775-42f7-9ea4-c8b0c7875da9.webp" alt="" loading="lazy"></p><p>到这里我们基础部分就搭建好了，接下来就可以开始我们的功能部分了！</p>',28)]))}]]);export{n as __pageData,e as default};
