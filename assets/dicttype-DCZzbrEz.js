import{z as ne,r,f as de,g as ie,c as se,a as w,b as t,l as v,v as q,h as l,i as s,j as ue,u as o,k as p,x as _,y as M,t as re,E as pe,n as k,e as f}from"./index-B_mAkUH5.js";import{l as ce,g as me,d as fe,u as ge,a as ve}from"./dictType-DtMYnulG.js";const _e={class:"app-container"},ye={class:"bcbox"},be={class:"bcbox"},ke={class:"bcbox"},we={class:"themecolor"},Ve={class:"dialog-footer"},Te={__name:"dicttype",setup(xe){const{proxy:Y}=ne(),S=r([]),g=r(!1),N=r(!0),$=r(!0),U=r([]),I=r(!0),K=r(!0),C=r(0),T=r(""),V=r([]),P=r(),L=de({form:{},queryParams:{pageNum:1,pageSize:10,dictName:void 0,dictType:void 0,status:void 0},rules:{dictName:[{required:!0,message:"字典名称不能为空",trigger:"blur"}],dictType:[{required:!0,message:"字典类型不能为空",trigger:"blur"}]}}),{queryParams:c,form:d,rules:Q}=ie(L);function y(){N.value=!0,ce(Y.$addDateRange(c.value,V.value)).then(i=>{S.value=i.data,C.value=i.total,N.value=!1})}function j(){g.value=!1,h()}function h(){d.value={dictId:void 0,dictName:void 0,dictType:void 0,status:"0",remark:void 0}}function D(){c.value.pageNum=1,y()}function A(){V.value=[],D()}function F(){h(),g.value=!0,T.value="添加字典类型"}function G(i){U.value=i.map(e=>e.dictId),I.value=i.length!=1,K.value=!i.length}function z(i){h();const e=i.dictId||U.value;me(e).then(u=>{d.value=u.data,g.value=!0,T.value="修改字典类型"})}const H=async i=>{i&&await i.validate((e,u)=>{e?d.value.dictId!=null?ge(d.value).then(n=>{n.code==200?k.success(n.message):k.error(n.message),g.value=!1,y()}):ve(d.value).then(n=>{n.code==200?k.success(n.message):k.error(n.message),g.value=!1,y()}):console.log("error submit!",u)})},J=async i=>{const e=i.dictId||e.value;pe.confirm("是否确认删除选中的数据项？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{fe(e).then(u=>{u.code==200?(k.success(u.message),y()):k.error(u.message)})}).catch(()=>{})};return y(),(i,e)=>{const u=s("el-input"),n=s("el-form-item"),O=s("el-date-picker"),m=s("el-button"),B=s("el-form"),E=s("el-col"),W=s("el-row"),b=s("el-table-column"),X=s("router-link"),Z=s("el-table"),ee=s("Pagination"),R=s("el-radio"),te=s("el-radio-group"),le=s("el-dialog"),x=M("hasPermi"),ae=M("loading");return f(),se("div",_e,[w("div",ye,[v(t(B,{model:o(c),ref:"queryRef",inline:!0,"label-width":"68px"},{default:l(()=>[t(n,{label:"字典名称",prop:"dictName"},{default:l(()=>[t(u,{modelValue:o(c).dictName,"onUpdate:modelValue":e[0]||(e[0]=a=>o(c).dictName=a),placeholder:"请输入字典名称",clearable:"",style:{width:"240px"},onKeyup:ue(D,["enter"])},null,8,["modelValue"])]),_:1}),t(n,{label:"创建时间",style:{width:"308px"}},{default:l(()=>[t(O,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=a=>V.value=a),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),t(n,null,{default:l(()=>[t(m,{type:"primary",icon:"Search",onClick:D},{default:l(()=>e[10]||(e[10]=[p("搜索")])),_:1}),t(m,{icon:"Refresh",onClick:A},{default:l(()=>e[11]||(e[11]=[p("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[q,$.value]])]),w("div",be,[t(W,{gutter:10,class:"mb8"},{default:l(()=>[t(E,{span:1.5},{default:l(()=>[v((f(),_(m,{type:"primary",plain:"",icon:"Plus",onClick:F},{default:l(()=>e[12]||(e[12]=[p("新增")])),_:1})),[[x,["system:dict:add"]]])]),_:1}),t(E,{span:1.5},{default:l(()=>[v((f(),_(m,{type:"success",plain:"",icon:"Edit",disabled:I.value,onClick:z},{default:l(()=>e[13]||(e[13]=[p("修改")])),_:1},8,["disabled"])),[[x,["system:dict:edit"]]])]),_:1})]),_:1})]),w("div",ke,[v((f(),_(Z,{data:S.value,onSelectionChange:G},{default:l(()=>[t(b,{type:"selection",width:"55",align:"center"}),t(b,{label:"字典编号",align:"center",prop:"dictId"}),t(b,{label:"字典名称",align:"center",prop:"dictName","show-overflow-tooltip":!0}),t(b,{label:"字典类型",align:"center","show-overflow-tooltip":!0},{default:l(a=>[t(X,{to:"/system/dictdata/index/"+a.row.dictId,class:"link-type"},{default:l(()=>[w("span",we,re(a.row.dictType),1)]),_:2},1032,["to"])]),_:1}),t(b,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),t(b,{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},{default:l(a=>[v((f(),_(m,{link:"",type:"primary",icon:"Edit",onClick:oe=>z(a.row)},{default:l(()=>e[14]||(e[14]=[p("修改")])),_:2},1032,["onClick"])),[[x,["system:dict:edit"]]]),v((f(),_(m,{link:"",type:"primary",icon:"Delete",onClick:oe=>J(a.row)},{default:l(()=>e[15]||(e[15]=[p("删除")])),_:2},1032,["onClick"])),[[x,["system:dict:remove"]]])]),_:1})]),_:1},8,["data"])),[[ae,N.value]]),v(t(ee,{total:C.value,"current-page":o(c).pageNum,"onUpdate:currentPage":e[2]||(e[2]=a=>o(c).pageNum=a),"page-size":o(c).pageSize,"onUpdate:pageSize":e[3]||(e[3]=a=>o(c).pageSize=a),onPagination:y},null,8,["total","current-page","page-size"]),[[q,C.value>0]])]),t(le,{title:T.value,modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=a=>g.value=a),width:"500px","append-to-body":""},{footer:l(()=>[w("div",Ve,[t(m,{type:"primary",onClick:e[8]||(e[8]=a=>H(P.value))},{default:l(()=>e[18]||(e[18]=[p("确 定")])),_:1}),t(m,{onClick:j},{default:l(()=>e[19]||(e[19]=[p("取 消")])),_:1})])]),default:l(()=>[t(B,{ref_key:"dictRef",ref:P,model:o(d),rules:o(Q),"label-width":"80px"},{default:l(()=>[t(n,{label:"字典名称",prop:"dictName"},{default:l(()=>[t(u,{modelValue:o(d).dictName,"onUpdate:modelValue":e[4]||(e[4]=a=>o(d).dictName=a),placeholder:"请输入字典名称"},null,8,["modelValue"])]),_:1}),t(n,{label:"字典类型",prop:"dictType"},{default:l(()=>[t(u,{modelValue:o(d).dictType,"onUpdate:modelValue":e[5]||(e[5]=a=>o(d).dictType=a),placeholder:"请输入字典类型"},null,8,["modelValue"])]),_:1}),t(n,{label:"状态",prop:"status"},{default:l(()=>[t(te,{modelValue:o(d).status,"onUpdate:modelValue":e[6]||(e[6]=a=>o(d).status=a)},{default:l(()=>[(f(),_(R,{key:0,value:"0"},{default:l(()=>e[16]||(e[16]=[p("正常")])),_:1})),(f(),_(R,{key:1,value:"1"},{default:l(()=>e[17]||(e[17]=[p("禁用")])),_:1}))]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"备注",prop:"remark"},{default:l(()=>[t(u,{modelValue:o(d).remark,"onUpdate:modelValue":e[7]||(e[7]=a=>o(d).remark=a),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}};export{Te as default};
