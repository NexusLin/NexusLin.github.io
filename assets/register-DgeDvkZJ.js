import{_ as E,r as u,c as f,b as o,h as t,a as p,x as w,C as y,i as n,j as g,R,k as B,q as K,e as m,E as h,n as T,m as V}from"./index-B_mAkUH5.js";import{r as N}from"./login-D_PYrTNz.js";const I={class:"pageregister backbaige morphismimg"},H={class:"register-code",style:{width:"48%"}},L={class:"register-code"},S=["src"],$={key:0},j={key:1},F={style:{float:"right"}},A={__name:"register",setup(D){const b=u(!0),k=K(),s=u({username:"admin",password:"123456",confirmPassword:"123456",code:"",uuid:""}),_=u(null),x={username:[{required:!0,trigger:"blur",message:"请输入您的账号"},{min:2,max:20,message:"用户账号长度必须介于 2 和 20 之间",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"},{pattern:/^[^<>"'|\\]+$/,message:`不能包含非法字符：<> " ' \\ |`,trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:(c,e,r)=>{s.value.password!==e?r(new Error("两次输入的密码不一致")):r()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},C=u(""),v=u(!1),q=u(!1),d=async()=>{await _.value.validate((c,e)=>{c?(console.log("submit!"),N(s.value).then(r=>{if(r.code==200){const l=s.value.username;h.alert("<font color='red'>恭喜你，您的账号 "+l+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{k.push("/login")}).catch(()=>{console.log("错误")})}else h.alert("<font color='red'>"+r.message+"</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{}).catch(()=>{})}).catch(()=>{T({message:V.errorMsg?V.errorMsg:"Please contact the administrator！",type:"error",plain:!0})})):console.log("error submit!",e)})};return(c,e)=>{const r=n("svgIcon"),l=n("el-input"),i=n("el-form-item"),P=n("VerificationCode"),U=n("el-button"),M=n("router-link"),z=n("el-form");return m(),f("div",I,[o(z,{ref_key:"registerRef",ref:_,model:s.value,rules:x,class:"register-form morphismblur"},{default:t(()=>[e[7]||(e[7]=p("h3",{class:"title"},"后台管理系统",-1)),o(i,{prop:"username"},{default:t(()=>[o(l,{modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.username=a),type:"text",size:"large","auto-complete":"off",placeholder:"账号"},{prefix:t(()=>[o(r,{name:"user",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),o(i,{prop:"password"},{default:t(()=>[o(l,{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.password=a),type:"password",size:"large","auto-complete":"off",placeholder:"密码",onKeyup:g(d,["enter"])},{prefix:t(()=>[o(r,{name:"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),o(i,{prop:"confirmPassword"},{default:t(()=>[o(l,{modelValue:s.value.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.confirmPassword=a),type:"password",size:"large","auto-complete":"off",placeholder:"确认密码",onKeyup:g(d,["enter"])},{prefix:t(()=>[o(r,{name:"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),b.value?(m(),w(i,{key:0,prop:"code"},{default:t(()=>[o(l,{size:"large",modelValue:s.value.code,"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.code=a),"auto-complete":"off",placeholder:"验证码",style:{width:"50%","margin-right":"2%"},onKeyup:g(d,["enter"])},{prefix:t(()=>[o(r,{name:"validCode",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"]),p("div",H,[o(P,{style:{width:"100%",height:"40px"},length:4})])]),_:1})):y("",!0),q.value?(m(),w(i,{key:1,prop:"code"},{default:t(()=>[o(l,{size:"large",modelValue:s.value.code,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.code=a),"auto-complete":"off",placeholder:"验证码",style:{width:"63%"},onKeyup:g(d,["enter"])},{prefix:t(()=>[o(r,{name:"validCode",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"]),p("div",L,[p("img",{src:C.value,onClick:e[5]||(e[5]=(...a)=>c.getCode&&c.getCode(...a)),class:"register-code-img"},null,8,S)])]),_:1})):y("",!0),o(i,{style:{width:"100%"}},{default:t(()=>[o(U,{loading:v.value,size:"large",type:"primary",style:{width:"100%"},onClick:R(d,["prevent"])},{default:t(()=>[v.value?(m(),f("span",j,"注 册 中...")):(m(),f("span",$,"注 册"))]),_:1},8,["loading"]),p("div",F,[o(M,{class:"link-type",to:"/login"},{default:t(()=>e[6]||(e[6]=[B("使用已有账户登录")])),_:1})])]),_:1})]),_:1},8,["model"])])}}},Q=E(A,[["__scopeId","data-v-5e377acf"]]);export{Q as default};
