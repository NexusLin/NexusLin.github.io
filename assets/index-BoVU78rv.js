import{s as w,B as G,f as H,r as d,g as X,o as Y,n as m,c as z,a as V,b as l,h as t,u as n,i as f,j as U,k as g,t as Z,x as I,E as ee,q as le,e as k}from"./index-B_mAkUH5.js";function ae(c){return w({url:"/feedbacks",method:"get",params:c})}function oe(c){return w({url:"/feedbacks",method:"post",data:c})}function te(c){return w({url:`/feedbacks/${c}`,method:"delete"})}function ne(c){return w({url:"/feedbacks",method:"put",data:c})}const se={class:"pagebox pageuser"},re={class:"bcbox"},de={class:"bcbox"},ue={class:"mgbt20"},ie={key:0},pe={key:1},me={class:"page-pagination"},fe={class:"dialog-footer"},ge="100px",ve=G({__name:"index",setup(c){le();const D=H({form:{},queryParams:{pageNum:1,pageSize:10,name:"",age:"",sex:1,userId:""},rules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"change"}]}});d("");const{queryParams:u,form:s,rules:ce}=X(D);d(null);const q=d([]),b=d(!1),h=d(""),x=d(1),C=d(10),F=d(!1),T=d(!1),$=d(!1),N=d(!1);Y(()=>{console.log("挂载"),_()});function _(){u.value.pageNum=1,y()}const y=async()=>{try{const o=await ae(u.value);console.log(o,"res"),o.code==200?(q.value=o.data,N.value=o.total):m.error(o.message)}catch{m.error("加载反馈数据失败")}};function E(o){L(),b.value=!0,h.value="反馈信息添加"}const R=async()=>{try{if(s.value.id){const o=await ne(s.value);console.log(o,"res"),o.code==200?(m.success(o.message),b.value=!1,y()):m.error(o.message)}else{const o=await oe(s.value);console.log(o,"res"),o.code==200?(m.success(o.message),b.value=!1,y()):m.error(o.message)}}catch{m.error("操作失败")}};function K(o){console.log(o,"修改"),h.value="反馈信息";let e=JSON.parse(JSON.stringify(o));s.value=e,b.value=!0}const M=async o=>{const e=o.id||e.value;ee.confirm("是否确认删除选中的数据项？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{te(e).then(r=>{r.code==200?(m.success(r.message),y()):m.error(r.message)})}).catch(()=>{})},P=d(),j=o=>{console.log(`${o} items per page`),u.value.pageSize=C.value,y()},J=o=>{console.log(`current page: ${o}`),u.value.pageNum=x.value,y()};function L(){s.value={id:null,name:"",phone:"",describe:"",feedinformation:""}}return(o,e)=>{const r=f("el-input"),i=f("el-form-item"),v=f("el-button"),S=f("el-form"),p=f("el-table-column"),B=f("el-tag"),O=f("el-table"),Q=f("el-pagination"),A=f("el-dialog");return k(),z("div",se,[V("div",re,[l(S,{model:n(u),ref:"queryRef",inline:!0},{default:t(()=>[l(i,{label:"用户名",prop:"name"},{default:t(()=>[l(r,{modelValue:n(u).name,"onUpdate:modelValue":e[0]||(e[0]=a=>n(u).name=a),placeholder:"请输入",clearable:"",style:{width:"120px"},onKeyup:U(_,["enter"])},null,8,["modelValue"])]),_:1}),l(i,{label:"用户ID",prop:"userId"},{default:t(()=>[l(r,{modelValue:n(u).userId,"onUpdate:modelValue":e[1]||(e[1]=a=>n(u).userId=a),placeholder:"请输入",clearable:"",style:{width:"120px"},onKeyup:U(_,["enter"])},null,8,["modelValue"])]),_:1}),l(i,{label:"电话号",prop:"phnoe"},{default:t(()=>[l(r,{modelValue:n(u).phnoe,"onUpdate:modelValue":e[2]||(e[2]=a=>n(u).phnoe=a),placeholder:"请输入",clearable:"",style:{width:"120px"},onKeyup:U(_,["enter"])},null,8,["modelValue"])]),_:1}),l(i,null,{default:t(()=>[l(v,{type:"primary",onClick:_},{default:t(()=>e[12]||(e[12]=[g("查询")])),_:1}),l(v,{type:"success",onClick:o.resetQuery},{default:t(()=>e[13]||(e[13]=[g("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),V("div",de,[V("div",ue,[l(v,{onClick:E,type:"primary"},{default:t(()=>e[14]||(e[14]=[g("增加")])),_:1})]),l(O,{border:"",data:q.value,stripe:"",style:{width:"100%"}},{default:t(()=>[l(p,{prop:"id",label:"记录ID",width:"80"}),l(p,{prop:"userId",label:"用户ID",width:"150"}),l(p,{prop:"name",label:"姓名",width:"150"}),l(p,{prop:"phone",label:"电话",width:"150"}),l(p,{prop:"describe",label:"描述"}),l(p,{prop:"createTime",label:"创建时间",width:"180"}),l(p,{fixed:"right",label:"反馈信息",width:"200","show-overflow-tooltip":!0},{default:t(a=>[a.row.feedinformation==""?(k(),z("span",ie,"----")):(k(),z("span",pe,Z(a.row.feedinformation),1))]),_:1}),l(p,{fixed:"right",label:"反馈状态",width:"180"},{default:t(a=>[a.row.feedinformation==""?(k(),I(B,{key:0,type:"danger"},{default:t(()=>e[15]||(e[15]=[g("等待反馈")])),_:1})):(k(),I(B,{key:1,type:"success"},{default:t(()=>e[16]||(e[16]=[g("反馈完成")])),_:1}))]),_:1}),l(p,{fixed:"right",label:"操作",width:"180"},{default:t(a=>[l(v,{size:"small",onClick:W=>K(a.row)},{default:t(()=>e[17]||(e[17]=[g("反馈信息")])),_:2},1032,["onClick"]),l(v,{type:"danger",size:"small",onClick:W=>M(a.row)},{default:t(()=>e[18]||(e[18]=[g("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),V("div",me,[l(Q,{"current-page":x.value,"onUpdate:currentPage":e[3]||(e[3]=a=>x.value=a),"page-size":C.value,"onUpdate:pageSize":e[4]||(e[4]=a=>C.value=a),"page-sizes":[10,20,50],small:F.value,disabled:$.value,background:T.value,layout:"->, total, sizes, prev, pager, next, jumper",total:N.value,onSizeChange:j,onCurrentChange:J},null,8,["current-page","page-size","small","disabled","background","total"])])]),l(A,{modelValue:b.value,"onUpdate:modelValue":e[11]||(e[11]=a=>b.value=a),title:h.value,width:"660","align-center":"",draggable:""},{footer:t(()=>[V("div",fe,[l(v,{onClick:e[10]||(e[10]=a=>b.value=!1)},{default:t(()=>e[19]||(e[19]=[g("Cancel")])),_:1}),l(v,{type:"primary",onClick:R},{default:t(()=>e[20]||(e[20]=[g(" 确认 ")])),_:1})])]),default:t(()=>[l(S,{ref_key:"formRef",ref:P,model:n(s),"label-width":ge},{default:t(()=>[l(i,{label:"姓名",prop:"name",rules:[{required:!0,message:"请输入姓名",trigger:"blur"}]},{default:t(()=>[l(r,{modelValue:n(s).name,"onUpdate:modelValue":e[5]||(e[5]=a=>n(s).name=a),placeholder:"请输入姓名",disabled:""},null,8,["modelValue"])]),_:1}),l(i,{label:"电话",prop:"phone",rules:[{required:!0,message:"请输入电话",trigger:"blur"}]},{default:t(()=>[l(r,{modelValue:n(s).phone,"onUpdate:modelValue":e[6]||(e[6]=a=>n(s).phone=a),placeholder:"请输入电话",disabled:""},null,8,["modelValue"])]),_:1}),l(i,{label:"描述",prop:"describe"},{default:t(()=>[l(r,{modelValue:n(s).describe,"onUpdate:modelValue":e[7]||(e[7]=a=>n(s).describe=a),placeholder:"请输入描述",disabled:""},null,8,["modelValue"])]),_:1}),l(i,{label:"用户名",prop:"username"},{default:t(()=>[l(r,{modelValue:n(s).username,"onUpdate:modelValue":e[8]||(e[8]=a=>n(s).username=a),placeholder:"请输入用户名",disabled:""},null,8,["modelValue"])]),_:1}),l(i,{label:"反馈信息",prop:"feedinformation",rules:[{required:!0,message:"请输入反馈信息",trigger:"blur"}]},{default:t(()=>[l(r,{modelValue:n(s).feedinformation,"onUpdate:modelValue":e[9]||(e[9]=a=>n(s).feedinformation=a),placeholder:"请输入反馈信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});export{ve as default};
