import{_ as Q,f as W,r as i,w as G,g as H,o as J,c as X,a as v,b as l,h as a,i as d,j as k,u as t,k as b,l as Y,m as Z,p as ee,v as le,E as ae,n as V,q as oe,e as te}from"./index-B_mAkUH5.js";import{l as ne,d as se,e as ue,a as de,g as re}from"./user-B0LFSwAl.js";const pe={class:"pagebox pageuser"},ie={class:"bcbox"},me={class:"bcbox"},fe={class:"mgbt20"},ge={class:"image-slot"},_e={class:"dialog-footer"},ce="80px",be={__name:"index",setup(ve){oe();const N=W({form:{},queryParams:{pageNum:1,pageSize:10,name:"",age:"",sex:""},rules:{phone:[{required:!0,message:"手机号不能为空",trigger:"blur"}],address:[{required:!1,message:"地址不能为空",trigger:"change"}],name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],password:[{required:!0,message:"登录密码不能为空",trigger:"blur"}],age:[{required:!1,message:"性别不能为空",trigger:"change"}],avatar:[{required:!1,message:"头像不能为空",trigger:"change"}]}}),x=i("");G(x,u=>{console.log("图片 URL 已更新:",u)});const{queryParams:s,form:n,rules:P}=H(N);i(null);const C=i([]),f=i(!1),y=i("");i(2),i(10),i(!1),i(!1),i(!1);const U=i(0);J(()=>{console.log("挂载"),g()});function g(){s.value.pageNum=1,h()}function h(){ne(s.value).then(u=>{u.code==200&&(C.value=u.data),U.value=u.total})}function R(u){re(u.userId).then(e=>{e.code==200&&(n.value=e.data,f.value=!0,x.value=e.data.avatar)})}function S(u){K(),f.value=!0,y.value="添加"}async function B(){console.log(n.value,"表单提交数据"),n.value.username=n.value.phone;const u=i(!0);try{let e;n.value.userId?(console.log("修改"),e=await ue(n.value)):(console.log("增加"),e=await de(n.value)),e.code===200?(V.success(e.message),f.value=!1,g()):V.error(e.message)}catch(e){console.error(e),V.error("操作失败，请稍后再试")}finally{u.value=!1}}function I(u){y.value="修改",R(u)}const D=async u=>{const e=u.userId||e.value;ae.confirm("是否确认删除选中的数据项？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{se(e).then(r=>{r.code==200?(V.success(r.message),h()):V.error(r.message)})}).catch(()=>{})},E=i();function K(){n.value={name:"",age:"",sex:1,imageUrl:""},x.value=""}return(u,e)=>{const r=d("el-input"),p=d("el-form-item"),w=d("el-option"),q=d("el-select"),_=d("el-button"),z=d("el-form"),c=d("el-table-column"),L=d("el-icon"),T=d("el-image"),F=d("el-table"),M=d("Pagination"),m=d("el-col"),$=d("ImageUpload"),j=d("el-row"),A=d("el-dialog");return te(),X("div",pe,[v("div",ie,[l(z,{model:t(s),ref:"queryRef",inline:!0},{default:a(()=>[l(p,{label:"姓名",prop:"name"},{default:a(()=>[l(r,{modelValue:t(s).name,"onUpdate:modelValue":e[0]||(e[0]=o=>t(s).name=o),placeholder:"请输入姓名",clearable:"",style:{width:"120px"},onKeyup:k(g,["enter"])},null,8,["modelValue"])]),_:1}),l(p,{label:"年龄",prop:"age"},{default:a(()=>[l(r,{modelValue:t(s).age,"onUpdate:modelValue":e[1]||(e[1]=o=>t(s).age=o),placeholder:"请输入年龄",clearable:"",style:{width:"120px"},onKeyup:k(g,["enter"])},null,8,["modelValue"])]),_:1}),l(p,{label:"手机号",prop:"phone"},{default:a(()=>[l(r,{modelValue:t(s).phone,"onUpdate:modelValue":e[2]||(e[2]=o=>t(s).phone=o),placeholder:"请输入",clearable:"",style:{width:"120px"},onKeyup:k(g,["enter"])},null,8,["modelValue"])]),_:1}),l(p,{label:"性别",prop:"sex"},{default:a(()=>[l(q,{modelValue:t(s).sex,"onUpdate:modelValue":e[3]||(e[3]=o=>t(s).sex=o),placeholder:"请选择性别",clearable:"",style:{width:"120px"}},{default:a(()=>[l(w,{label:"男",value:1}),l(w,{label:"女",value:2})]),_:1},8,["modelValue"])]),_:1}),l(p,null,{default:a(()=>[l(_,{type:"primary",onClick:g},{default:a(()=>e[17]||(e[17]=[b("查询用户")])),_:1})]),_:1})]),_:1},8,["model"])]),v("div",me,[v("div",fe,[l(_,{onClick:S,type:"primary"},{default:a(()=>e[18]||(e[18]=[b("增加用户")])),_:1})]),l(F,{class:"nexustable",border:"",data:C.value,style:{width:"100%"},"max-height":"540"},{default:a(()=>[l(c,{fixed:"",prop:"name",label:"姓名"}),l(c,{prop:"age",label:"年龄",width:"120"}),l(c,{fixed:"",prop:"phone",label:"手机号"}),l(c,{prop:"createTime",label:"创建时间",width:"200"}),l(c,{prop:"avatar",label:"头像",width:"300"},{default:a(o=>[l(T,{style:{width:"50px",height:"50px"},src:t(Z).baseURL+o.row.avatar,fit:"contain"},{error:a(()=>[v("div",ge,[l(L,null,{default:a(()=>[l(t(ee))]),_:1})])]),_:2},1032,["src"])]),_:1}),l(c,{fixed:"right",label:"Operations"},{default:a(o=>[l(_,{type:"success",plain:"",onClick:O=>I(o.row)},{default:a(()=>e[19]||(e[19]=[b("修改")])),_:2},1032,["onClick"]),l(_,{type:"danger",plain:"",onClick:O=>D(o.row)},{default:a(()=>e[20]||(e[20]=[b("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Y(l(M,{total:U.value,"current-page":t(s).pageNum,"onUpdate:currentPage":e[4]||(e[4]=o=>t(s).pageNum=o),"page-size":t(s).pageSize,"onUpdate:pageSize":e[5]||(e[5]=o=>t(s).pageSize=o),onPagination:h},null,8,["total","current-page","page-size"]),[[le,U.value>0]])]),l(A,{modelValue:f.value,"onUpdate:modelValue":e[16]||(e[16]=o=>f.value=o),title:y.value,width:"660","align-center":"",draggable:"","body-class":"dialogform"},{footer:a(()=>[v("div",_e,[l(_,{onClick:e[15]||(e[15]=o=>f.value=!1)},{default:a(()=>e[21]||(e[21]=[b("Cancel")])),_:1}),l(_,{type:"primary",onClick:B},{default:a(()=>e[22]||(e[22]=[b(" 确认 ")])),_:1})])]),default:a(()=>[l(z,{ref_key:"ruleFormRef",ref:E,model:t(n),"label-width":ce,rules:t(P)},{default:a(()=>[l(j,null,{default:a(()=>[l(m,{span:12},{default:a(()=>[l(p,{label:"姓名",prop:"name"},{default:a(()=>[l(r,{modelValue:t(n).name,"onUpdate:modelValue":e[6]||(e[6]=o=>t(n).name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:12},{default:a(()=>[l(p,{label:"手机号",prop:"phone"},{default:a(()=>[l(r,{modelValue:t(n).phone,"onUpdate:modelValue":e[7]||(e[7]=o=>t(n).phone=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:12},{default:a(()=>[l(p,{label:"登录账号"},{default:a(()=>[l(r,{modelValue:t(n).username,"onUpdate:modelValue":e[8]||(e[8]=o=>t(n).username=o),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:12},{default:a(()=>[l(p,{label:"登录密码",prop:"password"},{default:a(()=>[l(r,{modelValue:t(n).password,"onUpdate:modelValue":e[9]||(e[9]=o=>t(n).password=o),autocomplete:"off",type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:12},{default:a(()=>[l(p,{label:"性别",prop:"sex"},{default:a(()=>[l(q,{modelValue:t(n).sex,"onUpdate:modelValue":e[10]||(e[10]=o=>t(n).sex=o),placeholder:"Please select a zone"},{default:a(()=>[l(w,{label:"男",value:1}),l(w,{label:"女",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(m,{span:12},{default:a(()=>[l(p,{label:"年龄",prop:"age"},{default:a(()=>[l(r,{modelValue:t(n).age,"onUpdate:modelValue":e[11]||(e[11]=o=>t(n).age=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:12},{default:a(()=>[l(p,{label:"健康状况",prop:"disease"},{default:a(()=>[l(r,{modelValue:t(n).disease,"onUpdate:modelValue":e[12]||(e[12]=o=>t(n).disease=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:12},{default:a(()=>[l(p,{label:"具体地址",prop:"address"},{default:a(()=>[l(r,{modelValue:t(n).address,"onUpdate:modelValue":e[13]||(e[13]=o=>t(n).address=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:24},{default:a(()=>[l(p,{label:"头像",prop:"avatar"},{default:a(()=>[l($,{modelValue:t(n).avatar,"onUpdate:modelValue":e[14]||(e[14]=o=>t(n).avatar=o),limit:1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},xe=Q(be,[["__scopeId","data-v-20915834"]]);export{xe as default};
