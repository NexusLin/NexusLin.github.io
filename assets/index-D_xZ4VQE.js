import{s as y,_ as H,r,f as J,w as X,g as Y,o as Z,c as ee,a as k,b as t,h as a,i as u,j as te,u as s,k as m,l as A,x as w,C as V,v as ae,E as D,n as v,q as le,y as oe,e as _}from"./index-B_mAkUH5.js";function ne(i){return y({url:"/cartitems",method:"get",params:i})}function re(i){return y({url:"/cartitems",method:"post",data:i})}function se(i){return y({url:`/cartitems/${i}`,method:"delete"})}function ie(i){return y({url:"/cartitems",method:"put",data:i})}function ue(i){return y({url:`/cartitems/${i}`,method:"get"})}function de(i,h){return y({url:"/cartitems/status/"+i,method:"put",data:h})}const me={class:"pagebox pageuser"},ce={class:"bcbox"},pe={class:"bcbox"},fe={class:"mgbt20"},ge={class:"dialog-footer"},ve="80px",_e={__name:"index",setup(i){le(),r([]);const h=J({form:{},queryParams:{pageNum:1,pageSize:10,name:""},rules:{phone:[{required:!0,message:"手机号不能为空",trigger:"blur"}],address:[{required:!1,message:"地址不能为空",trigger:"change"}],name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],password:[{required:!0,message:"登录密码不能为空",trigger:"blur"}],age:[{required:!1,message:"性别不能为空",trigger:"change"}],avatar:[{required:!1,message:"头像不能为空",trigger:"change"}]}}),R=r("");X(R,o=>{console.log("图片 URL 已更新:",o)});const{queryParams:c,form:d,rules:T}=Y(h);r(null);const U=r([]),f=r(!1),q=r("");r(2),r(10),r(!1),r(!1),r(!1);const B=r(0);Z(()=>{console.log("挂载"),x()});function x(){c.value.pageNum=1,b()}function b(){ne(c.value).then(o=>{o.code==200&&(U.value=o.data),B.value=o.total})}function E(o){P();const e=o.cartitemId||e.value;ue(e).then(n=>{d.value=n.data,f.value=!0,q.value="修改"})}function F(o){P(),f.value=!0,q.value="添加"}async function L(){let o;d.value.cartitemId?(console.log("修改"),o=await ie(d.value)):(console.log("增加"),o=await re(d.value)),o.code===200?(v.success(o.message),f.value=!1,x()):v.error(o.message)}const M=async o=>{const e=o.cartitemId||e.value;D.confirm("是否确认删除选中的数据项？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{se(e).then(n=>{n.code==200?(v.success(n.message),b()):v.error(n.message)})}).catch(()=>{})},K=r();function N(o,e){D.confirm("确认要更改状态吗?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{de(o.cartitemId,{isActive:e}).then(function(n){n.code==200?(v.success(n.message),b()):(v.error(n.message),b())})}).catch(()=>{})}function P(){d.value={price:"",quantity:""}}return(o,e)=>{const n=u("el-input"),C=u("el-form-item"),p=u("el-button"),S=u("el-form"),g=u("el-table-column"),$=u("el-tag"),j=u("el-table"),O=u("Pagination"),z=u("el-col"),Q=u("el-row"),W=u("el-dialog"),G=oe("hasPermi");return _(),ee("div",me,[k("div",ce,[t(S,{model:s(c),ref:"queryRef",inline:!0},{default:a(()=>[t(C,{label:"价格",prop:"price"},{default:a(()=>[t(n,{modelValue:s(c).price,"onUpdate:modelValue":e[0]||(e[0]=l=>s(c).price=l),placeholder:"请输入",clearable:"",style:{width:"120px"},onKeyup:te(x,["enter"])},null,8,["modelValue"])]),_:1}),t(C,null,{default:a(()=>[t(p,{type:"primary",onClick:x},{default:a(()=>e[7]||(e[7]=[m("查询")])),_:1})]),_:1})]),_:1},8,["model"])]),k("div",pe,[k("div",fe,[A((_(),w(p,{onClick:F,type:"primary"},{default:a(()=>e[8]||(e[8]=[m("增加")])),_:1})),[[G,["system:product:add"]]])]),t(j,{class:"nexustable",border:"",data:U.value,style:{width:"100%"},"max-height":"540"},{default:a(()=>[t(g,{fixed:"",prop:"cartitemId",label:"ID"}),t(g,{fixed:"",prop:"userId",label:"UserId"}),t(g,{fixed:"",prop:"price",label:"价格"}),t(g,{prop:"createTime",label:"创建时间",width:"200"}),t(g,{label:"状态",align:"center",key:"status"},{default:a(l=>[l.row.isActive==0?(_(),w($,{key:0,style:{cursor:"pointer"},type:"success"},{default:a(()=>e[9]||(e[9]=[m("展示")])),_:1})):V("",!0),l.row.isActive==1?(_(),w($,{key:1,style:{cursor:"pointer"},type:"primary"},{default:a(()=>e[10]||(e[10]=[m("撤销")])),_:1})):V("",!0)]),_:1}),t(g,{fixed:"right",label:"Operations"},{default:a(l=>[t(p,{type:"success",plain:"",onClick:I=>E(l.row)},{default:a(()=>e[11]||(e[11]=[m("修改")])),_:2},1032,["onClick"]),t(p,{type:"danger",plain:"",onClick:I=>M(l.row)},{default:a(()=>e[12]||(e[12]=[m("删除")])),_:2},1032,["onClick"]),l.row.isActive==1?(_(),w(p,{key:0,type:"info",plain:"",onClick:I=>N(l.row,0)},{default:a(()=>e[13]||(e[13]=[m("去展示")])),_:2},1032,["onClick"])):V("",!0),l.row.isActive==0?(_(),w(p,{key:1,type:"warning",plain:"",onClick:I=>N(l.row,1)},{default:a(()=>e[14]||(e[14]=[m("去撤销")])),_:2},1032,["onClick"])):V("",!0)]),_:1})]),_:1},8,["data"]),A(t(O,{total:B.value,"current-page":s(c).pageNum,"onUpdate:currentPage":e[1]||(e[1]=l=>s(c).pageNum=l),"page-size":s(c).pageSize,"onUpdate:pageSize":e[2]||(e[2]=l=>s(c).pageSize=l),onPagination:b},null,8,["total","current-page","page-size"]),[[ae,B.value>0]])]),t(W,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=l=>f.value=l),title:q.value,width:"660","align-center":"",draggable:"","body-class":"dialogform"},{footer:a(()=>[k("div",ge,[t(p,{onClick:e[5]||(e[5]=l=>f.value=!1)},{default:a(()=>e[15]||(e[15]=[m("Cancel")])),_:1}),t(p,{type:"primary",onClick:L},{default:a(()=>e[16]||(e[16]=[m(" 确认 ")])),_:1})])]),default:a(()=>[t(S,{ref_key:"ruleFormRef",ref:K,model:s(d),"label-width":ve,rules:s(T)},{default:a(()=>[t(Q,null,{default:a(()=>[t(z,{span:24},{default:a(()=>[t(C,{label:"商品价格",prop:"price"},{default:a(()=>[t(n,{modelValue:s(d).price,"onUpdate:modelValue":e[3]||(e[3]=l=>s(d).price=l),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),t(z,{span:24},{default:a(()=>[t(C,{label:"商品数量",prop:"quantity"},{default:a(()=>[t(n,{modelValue:s(d).quantity,"onUpdate:modelValue":e[4]||(e[4]=l=>s(d).quantity=l),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},be=H(_e,[["__scopeId","data-v-9c8f812e"]]);export{be as default};
