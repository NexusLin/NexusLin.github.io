import{_ as i,c as a,ag as n,o as t}from"./chunks/framework.Bft4-MjQ.js";const g=JSON.parse('{"title":"requestAnimationFrameå±æ€§","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"src/note/js/js-requestAnimationFrameåŠ¨ç”»å±æ€§.md","filePath":"src/note/js/js-requestAnimationFrameåŠ¨ç”»å±æ€§.md"}'),l={name:"src/note/js/js-requestAnimationFrameåŠ¨ç”»å±æ€§.md"};function p(e,s,h,k,E,r){return t(),a("div",null,s[0]||(s[0]=[n(`<h1 id="requestanimationframeå±æ€§" tabindex="-1">requestAnimationFrameå±æ€§ <a class="header-anchor" href="#requestanimationframeå±æ€§" aria-label="Permalink to &quot;requestAnimationFrameå±æ€§&quot;">â€‹</a></h1><h2 id="_1ã€è®¤è¯†requestanimationframeæ˜¯ä»€ä¹ˆ" tabindex="-1">1ã€è®¤è¯†requestAnimationFrameæ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_1ã€è®¤è¯†requestanimationframeæ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;1ã€è®¤è¯†requestAnimationFrameæ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h2><p>requestAnimationFrameæ˜¯ç”¨äºæµè§ˆå™¨åŠ¨ç”»çš„ JavaScript æ–¹æ³•</p><p>ç®€è€Œè¨€ä¹‹ï¼šrequestAnimationFrameå…¶å®å°±æ˜¯ç”¨æ¥åšåŠ¨ç”»çš„å±æ€§ï¼Œç”¨æ³•ä¸ŠåŒsetTimeoutç±»ä¼¼ï¼Œå¹¶ä¸”å¯ä»¥åŒ¹é…å½“å‰è®¾å¤‡çš„åˆ·æ–°ç‡ï¼ŒrequestAnimationFrame() é€šè¿‡è‡ªåŠ¨åŒ¹é…è®¾å¤‡å¸§ç‡æ¥å±•ç¤ºåŠ¨ç”»ï¼ˆå¤šå°‘å¸§å°±æ¯ç§’æ‰§è¡Œå¤šå°‘æ¬¡ï¼‰ï¼Œåšå‡ºå¯ä»¥åŒ¹é…è®¾å¤‡åˆ·æ–°ç‡çš„åŠ¨ç”»</p><p>æœ¬è´¨ä¸Šï¼šæ˜¯ä¸€ä¸ªæµè§ˆå™¨çš„å®ä»»åŠ¡è¯·æ±‚åŠ¨ç”»å¸§</p><h2 id="_2ã€ä½œç”¨" tabindex="-1">2ã€ä½œç”¨ <a class="header-anchor" href="#_2ã€ä½œç”¨" aria-label="Permalink to &quot;2ã€ä½œç”¨&quot;">â€‹</a></h2><ul><li>ä»£æ›¿å®šæ—¶å™¨åšæ›´åŠ æµç•…é«˜æ€§èƒ½çš„åŠ¨ç”»ï¼Œä¹Ÿå°±æ˜¯å¼¥è¡¥å®šæ—¶å™¨åšåŠ¨ç”»ä¸æµç•…çš„é—®é¢˜ï¼Œ</li><li>é«˜æ€§èƒ½ä¸”å¯ä»¥è§£å†³setTimeoutå‡ºç°åŠ¨ç”»å¡é¡¿çš„é—®é¢˜</li><li>å¼¥è¡¥cssæ— æ³•å®ç°çš„ä¸€äº›åŠ¨ç”»ï¼Œæ¯”å¦‚ï¼šé¡µé¢æ»šåŠ¨</li></ul><h2 id="_3ã€ä¸settimeoutçš„ç›¸åŒå’ŒåŒºåˆ†" tabindex="-1">3ã€ä¸setTimeoutçš„ç›¸åŒå’ŒåŒºåˆ† <a class="header-anchor" href="#_3ã€ä¸settimeoutçš„ç›¸åŒå’ŒåŒºåˆ†" aria-label="Permalink to &quot;3ã€ä¸setTimeoutçš„ç›¸åŒå’ŒåŒºåˆ†&quot;">â€‹</a></h2><h4 id="ã€ç›¸åŒç‚¹ã€‘" tabindex="-1">ã€ç›¸åŒç‚¹ã€‘ï¼š <a class="header-anchor" href="#ã€ç›¸åŒç‚¹ã€‘" aria-label="Permalink to &quot;ã€ç›¸åŒç‚¹ã€‘ï¼š&quot;">â€‹</a></h4><p>requestAnimationFrameä¸setTimeoutéƒ½ä¼šè¿”å›ä¸€ä¸ªå”¯ä¸€æ ‡è¯†</p><h4 id="ã€ä¸åŒç‚¹ã€‘" tabindex="-1">ã€ä¸åŒç‚¹ã€‘ï¼š <a class="header-anchor" href="#ã€ä¸åŒç‚¹ã€‘" aria-label="Permalink to &quot;ã€ä¸åŒç‚¹ã€‘ï¼š&quot;">â€‹</a></h4><p>åŸç†ä¸Š</p><ul><li>setTimeoutåˆ©ç”¨é€’å½’æ¥ä»£æ›¿setIntervalåšç®€å•çš„åŠ¨ç”»</li><li>requestAnimationFrame() é€šè¿‡è‡ªåŠ¨åŒ¹é…è®¾å¤‡å¸§ç‡æ¥å±•ç¤ºåŠ¨ç”»</li></ul><p>å…³é—­å®šæ—¶å™¨</p><ul><li>å®šæ—¶å™¨ä¸Šï¼ŒsetTimeoutå¯ä»¥é€šè¿‡clearTImeout()å…³é—­å®šæ—¶å™¨ã€‚</li><li>requestAnimationFrame() åˆ™ä½¿ç”¨cancelAnimationFrame()æ¥å…³é—­åŠ¨ç”»</li></ul><p>å‚æ•°ä¸Š</p><ul><li>setTimeoutä¼ å…¥å‡½æ•°å’Œæ—¶é—´</li><li>requestAnimationFrameè¿™ä¸ªæ–¹æ³•åªéœ€è¦ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä¸éœ€è¦å…¶ä»–å‚æ•°</li></ul><p>æ—¶é—´é—´éš”ä¸Š</p><p>åšåŠ¨ç”»éƒ½æœ‰ä¸€ä¸ªæ—¶é—´é—´éš”ï¼ŒrequestAnimationFrameä¹Ÿæœ‰æ—¶é—´é—´éš”</p><ul><li>setTimeoutç”±è‡ªå®šä¹‰çš„æ—¶é—´é—´éš”æ¥æ§åˆ¶çš„</li><li>requestAnimationFrameä¸è®¾å¤‡æŒ‚é’©åŒ¹é…ï¼ˆä¸å—å…¶ä»–ä»»åŠ¡çš„å½±å“ï¼‰</li></ul><p>å›è°ƒå‡½æ•°æ‰§è¡Œæ¬¡æ•°ä¸Š</p><ul><li>setTimeoutç”±è‡ªå®šä¹‰çš„æ—¶é—´é—´éš”æ¥æ§åˆ¶çš„</li><li>requestAnimationFrameğŸ‰‘ï¸åŒ¹é…è®¾å¤‡ï¼Œæ—¶é—´é—´éš”ä¸Šï¼ŒrequestAnimationFrameé€šå¸¸ç”±æˆ‘ä»¬ä¼ å…¥çš„å›è°ƒå‡½æ•°æ¯ç§’ä¼šæ‰§è¡Œ60æ¬¡ï¼Œä½†æ˜¯å¦‚æœä½ çš„è®¾å¤‡çš„æµè§ˆå™¨éµå¾ªW3cçš„æ ‡å‡†ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å‡½æ•°æ¯ç§’æ‰§è¡Œçš„æ¬¡æ•°ä¼šä¸ä½ è®¾å¤‡çš„åˆ·æ–°ç‡ç›¸åŒ¹é…ã€‚</li></ul><p>åŠ¨ç”»è¿è¡Œä¸Š</p><ul><li>setTimeoutç”±è‡ªå®šä¹‰çš„æ—¶é—´é—´éš”ä¸æ–­è¿è¡Œ</li><li>requestAnimationFrameåœ¨å¤§å¤šæµè§ˆå™¨ä¸­ä¸€æ—¦é¡µé¢ä¸å¤„äºæµè§ˆå™¨çš„å½“å‰æ ‡ç­¾ï¼ŒrequestAnimationFrameå°±ä¼šè‡ªåŠ¨åœæ­¢åŠ¨ç”»ã€‚</li></ul><p>åˆ·æ–°ç‡å’Œç¨³å®šæ€§ä¸Š</p><ul><li>ä½¿ç”¨å®šæ—¶å™¨setTimeoutåšåŠ¨ç”»ï¼Œå‡è®¾æ˜¾ç¤ºå™¨çš„åˆ·æ–°ç‡ä¸º60hzã€ä¹Ÿå°±æ˜¯æ¯1ç§’æ’­æ”¾60å¼ åŠ¨ç”»ã€‘ã€‚ä¸ºäº†è®©åŠ¨ç”»æ˜¾ç¤ºæµç•…ï¼Œæˆ‘ä»¬éœ€è¦å°†å®šæ—¶å™¨setTimeoutçš„é—´éš”æ—¶é—´å®šä½ â€œ1000/60â€ï¼Œã€æ„æ€å°±æ˜¯1000æ¯«ç§’æ‰§è¡Œ60æ¬¡å›è°ƒå‡½æ•°ã€‘ï¼Œä¹Ÿå°±æ˜¯1ç§’æ‰§è¡Œ60æ¬¡å›è°ƒå‡½æ•°ï¼Œå¤§çº¦æ¯éš”16.67æ¯«ç§’ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ ·å°±èƒ½åŒ¹é…æ˜¾ç¤ºå±çš„å¸§ç‡ã€‚ä½†æ˜¯ä¾ç„¶è¿˜ä¼šæœ‰å¡é¡¿é—®é¢˜ï¼Œå› ä¸ºå®šæ—¶å™¨å±äºå®ä»»åŠ¡ï¼Œè€Œå®ä»»åŠ¡å¿…é¡»ç­‰å¾…åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå†ç­‰å¾®ä»»åŠ¡æ‰§è¡Œå®Œæˆæ‰ä¼šæ‰§è¡Œå…¶ä¸­çš„å›è°ƒå‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è§„å®šçš„æ—¶é—´é—´éš”æ˜¯ä¸ç¨³å®šå¹¶ä¸”ä¸å‡†ç¡®çš„ã€‚</li><li>requestAnimationFrameåˆ™åŒ¹é…è®¾å¤‡åˆ·æ–°ç‡åŒæ­¥åŠ¨ç”»</li></ul><h2 id="_4ã€ä½¿ç”¨" tabindex="-1">4ã€ä½¿ç”¨ <a class="header-anchor" href="#_4ã€ä½¿ç”¨" aria-label="Permalink to &quot;4ã€ä½¿ç”¨&quot;">â€‹</a></h2><p>requestAnimationFrameçš„ç”¨æ³•ä¸setTimeoutå·®ä¸å¤š,ä»¥ä¸€ä¸ªå…ƒç´ ä¸Šä¸‹ç§»åŠ¨çš„åŠ¨ç”»æ¡ˆä¾‹æ¥å¯¹æ¯”</p><p>â¤ setTimeout() åšå…ƒç´ ä¸Šä¸‹ç§»åŠ¨åŠ¨ç”»ï¼š</p><div class="language-plain vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plain</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>const box = document.querySelector(&#39;.box&#39;); //è·å–å…ƒç´ </span></span>
<span class="line"><span>let timer = setTimeout(function fn() {</span></span>
<span class="line"><span>        let move = parseInt(getComputedStyle(box).top);//é¡¶éƒ¨è·ç¦»</span></span>
<span class="line"><span>	if (move &lt; 800) {</span></span>
<span class="line"><span>		box.style.top = move + 8 + &#39;px&#39;;</span></span>
<span class="line"><span>		setTimeout(fn, 1000/60);</span></span>
<span class="line"><span>	} else {</span></span>
<span class="line"><span>           clearTimeout(timer);</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}, 1000/60);</span></span></code></pre></div><p>â¤ requestAnimationFrame() åšå…ƒç´ ä¸Šä¸‹ç§»åŠ¨åŠ¨ç”»ï¼š</p><div class="language-plain vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plain</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>const box = document.querySelector(&#39;.box&#39;); //è·å–å…ƒç´ </span></span>
<span class="line"><span>let timer = requestAnimationFrame(function fn() { </span></span>
<span class="line"><span>    let move = parseInt(getComputedStyle(box).top);</span></span>
<span class="line"><span>	if (move &lt; 800) {</span></span>
<span class="line"><span>		box.style.left = move + 8 + &#39;px&#39;;</span></span>
<span class="line"><span>		requestAnimationFrame(fn);</span></span>
<span class="line"><span>	} else {</span></span>
<span class="line"><span>            cancelAnimationFrame(timer);</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>});</span></span></code></pre></div><h2 id="_5ã€ä¼˜ç¼ºç‚¹" tabindex="-1">5ã€ä¼˜ç¼ºç‚¹ <a class="header-anchor" href="#_5ã€ä¼˜ç¼ºç‚¹" aria-label="Permalink to &quot;5ã€ä¼˜ç¼ºç‚¹&quot;">â€‹</a></h2><p>ä¼˜ç‚¹ï¼š</p><ul><li>åŠ¨ç”»æ›´åŠ æµç•…</li><li>é«˜æ€§èƒ½</li><li>é¡µé¢æ»šåŠ¨</li></ul><p>ç¼ºç‚¹ï¼šå­˜åœ¨æµè§ˆå™¨å…¼å®¹é—®é¢˜</p><p>ã€å…¼å®¹æ€§é—®é¢˜å¤„ç†-å¼•ç”¨é˜®ä¸€å³°å¤§ç¥çš„ä»£ç ã€‘</p><div class="language-plain vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plain</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>window.requestAnimFrame = (function(){</span></span>
<span class="line"><span>  return  window.requestAnimationFrame       || </span></span>
<span class="line"><span>          window.webkitRequestAnimationFrame || </span></span>
<span class="line"><span>          window.mozRequestAnimationFrame    || </span></span>
<span class="line"><span>          window.oRequestAnimationFrame      || </span></span>
<span class="line"><span>          window.msRequestAnimationFrame     || </span></span>
<span class="line"><span>          function( callback ){</span></span>
<span class="line"><span>            window.setTimeout(callback, 1000 / 60);</span></span>
<span class="line"><span>          };</span></span>
<span class="line"><span>})();</span></span></code></pre></div><h2 id="_6ã€å®ä¾‹" tabindex="-1">6ã€å®ä¾‹ <a class="header-anchor" href="#_6ã€å®ä¾‹" aria-label="Permalink to &quot;6ã€å®ä¾‹&quot;">â€‹</a></h2><div class="language-JS vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">JS</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;!</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DOCTYPE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;requestAnimationFrame ç¤ºä¾‹&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        body {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            margin: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            overflow: hidden;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            font</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">family: Arial, sans</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">serif;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        #box {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            position: absolute;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            width: 50px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            height: 50px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            background</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">color: red;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .buttons {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            position: fixed;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            top: 10px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            left: 10px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            z</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">index: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        button {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            padding: 10px 20px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            margin: 5px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            font</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">size: 16px;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            cursor: pointer;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;box&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;buttons&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;startBtn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;å¯åŠ¨åŠ¨ç”»&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stopBtn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;ç»“æŸåŠ¨ç”»&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        const box = document.getElementById(&#39;box&#39;);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        const startBtn = document.getElementById(&#39;startBtn&#39;);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        const stopBtn = document.getElementById(&#39;stopBtn&#39;);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        let startTime = null;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        let xPos = 0;  // åˆå§‹ä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        let animationFrameId = null;  // ç”¨äºå­˜å‚¨ requestAnimationFrame çš„ IDï¼Œæ–¹ä¾¿å–æ¶ˆåŠ¨ç”»</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        // åŠ¨ç”»å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        function animate(time) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">startTime) startTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> time;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆå§‹åŒ–å¼€å§‹æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            let progress </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> startTime;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¡ç®—ç»è¿‡çš„æ—¶é—´</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ç§»åŠ¨æ–¹å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            xPos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> progress </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ ¹æ®ç»è¿‡çš„æ—¶é—´æ§åˆ¶ç§»åŠ¨é€Ÿåº¦</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // æ›´æ–°æ–¹å—çš„ä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            box.style.left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xPos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;px&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // å¦‚æœæ–¹å—æ²¡æœ‰ç§»åŠ¨åˆ°å±å¹•è¾¹ç¼˜ï¼Œç»§ç»­æ‰§è¡ŒåŠ¨ç”»</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (xPos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.innerWidth) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                animationFrameId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(animate);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¯·æ±‚ä¸‹ä¸€å¸§åŠ¨ç”»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } else {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // åˆ°è¾¾å±å¹•è¾¹ç¼˜åè‡ªåŠ¨åœæ­¢åŠ¨ç”»</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                cancelAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">animationFrameId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        // å¯åŠ¨åŠ¨ç”»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        startBtn.addEventListener(&#39;click&#39;, function() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // é‡ç½®ä½ç½®å’Œå¼€å§‹æ—¶é—´ï¼Œå¯åŠ¨æ–°çš„åŠ¨ç”»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            startTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            xPos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            box.style.left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;0px&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é‡ç½®æ–¹å—ä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            animationFrameId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(animate);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        // ç»“æŸåŠ¨ç”»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        stopBtn.addEventListener(&#39;click&#39;, function() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // å¦‚æœåŠ¨ç”»è¿˜åœ¨è¿è¡Œï¼Œå–æ¶ˆå®ƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            cancelAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(animationFrameId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div>`,40)]))}const o=i(l,[["render",p]]);export{g as __pageData,o as default};
