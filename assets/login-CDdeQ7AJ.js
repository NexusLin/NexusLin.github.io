import{_ as N,r as n,c as g,a as r,b as o,h as t,x as k,C as _,i,j as f,k as V,R as j,q as E,A as I,e as u,S as T,n as h}from"./index-B_mAkUH5.js";import{u as P}from"./user-C6RCANnn.js";import{l as S}from"./login-D_PYrTNz.js";const A="/assets/backjuejin-TP7Zhugz.mp4",L={class:"pagelogin"},Z={class:"backbaige flexcenter"},$={style:{display:"flex",gap:"10px"}},D={class:"login-code"},G=["src"],H={class:"login-code",style:{width:"48%"}},J={key:0},O={key:1},Q={key:0,style:{float:"right"}},W={__name:"login",setup(X){const w=E();I(),P();const x=n(!0),s=n({username:"admin",password:"123456",rememberMe:!1,code:"",uuid:""}),v=n(),b={username:[{required:!0,trigger:"blur",message:"请输入您的账号"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},C=n(""),y=n(!1),U=n(!1),z=n(!0);n(void 0);const p=async()=>{try{const a=await R();if(!a){console.log("表单验证失败");return}const e=await S(s.value);a?e.code==200?(T(e.token),h.success(e.message),w.push({path:"/admin"})):h.error(e.message):console.error("登录失败:")}catch(a){console.error("登录请求失败，错误信息:",a)}finally{}},R=()=>new Promise(a=>{v.value.validate((e,d)=>{e?a(!0):(console.log("表单验证失败",d),a(!1))})});return(a,e)=>{const d=i("svgIcon"),m=i("el-input"),c=i("el-form-item"),M=i("VerificationCode"),q=i("el-checkbox"),B=i("el-button"),F=i("router-link"),K=i("el-form");return u(),g("div",L,[e[9]||(e[9]=r("video",{class:"background-video",autoplay:"autoplay",loop:"loop",muted:"muted"},[r("source",{src:A,type:"video/mp4"})],-1)),r("div",Z,[o(K,{class:"login-form background-video-color",ref_key:"loginFormRef",ref:v,model:s.value,rules:b},{default:t(()=>[e[8]||(e[8]=r("h3",{class:"title"},"后台管理系统",-1)),o(c,{prop:"username"},{default:t(()=>[o(m,{modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.username=l),type:"text",size:"large","auto-complete":"off",placeholder:"账号"},{prefix:t(()=>[o(d,{name:"user",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),o(c,{prop:"password"},{default:t(()=>[o(m,{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.password=l),type:"password",size:"large","auto-complete":"off",placeholder:"密码",onKeyup:f(p,["enter"])},{prefix:t(()=>[o(d,{name:"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),U.value?(u(),k(c,{key:0,prop:"code"},{default:t(()=>[r("div",$,[o(m,{modelValue:s.value.code,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.code=l),size:"large","auto-complete":"off",placeholder:"验证码",style:{width:"50%"},onKeyup:f(p,["enter"])},{prefix:t(()=>[o(d,{name:"validCode",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"]),r("div",D,[r("img",{src:C.value,onClick:e[3]||(e[3]=(...l)=>a.getCode&&a.getCode(...l)),class:"login-code-img"},null,8,G)])])]),_:1})):_("",!0),x.value?(u(),k(c,{key:1,prop:"code"},{default:t(()=>[o(m,{modelValue:s.value.code,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.code=l),size:"large","auto-complete":"off",placeholder:"验证码",style:{width:"50%","margin-right":"2%"},onKeyup:f(p,["enter"])},{prefix:t(()=>[o(d,{name:"validCode",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"]),r("div",H,[o(M,{style:{width:"100%",height:"40px"},length:4})])]),_:1})):_("",!0),o(q,{modelValue:s.value.rememberMe,"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.rememberMe=l),class:"logincolor",style:{margin:"0px 0px 25px 0px"}},{default:t(()=>e[6]||(e[6]=[V("记住密码")])),_:1},8,["modelValue"]),o(c,{style:{width:"100%"}},{default:t(()=>[o(B,{loading:y.value,size:"large",type:"primary",style:{width:"100%"},onClick:j(p,["prevent"])},{default:t(()=>[y.value?(u(),g("span",O,"登 录 中...")):(u(),g("span",J,"登 录"))]),_:1},8,["loading"]),z.value?(u(),g("div",Q,[o(F,{class:"link-type",to:"/register"},{default:t(()=>e[7]||(e[7]=[V("立即注册")])),_:1})])):_("",!0)]),_:1})]),_:1},8,["model"])])])}}},te=N(W,[["__scopeId","data-v-f5a24c65"]]);export{te as default};
